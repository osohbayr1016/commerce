name = "commerce"
routes = [
	{ pattern = "maayaauvuu.com", custom_domain = true },
	{ pattern = "www.maayaauvuu.com", custom_domain = true }
]
compatibility_date = "2024-12-30"
compatibility_flags = ["nodejs_compat"]

# Cloudflare Workers configuration
main = ".open-next/worker.js"

[assets]
directory = ".open-next/assets"
binding = "ASSETS"

[images]
binding = "IMAGES"

# R2 Bucket Binding (bucket_name must match your R2 bucket, e.g. commerceq)
[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "commerceq"

# Durable Objects Bindings (Optional - for realtime features)
# Uncomment when ready to deploy Durable Objects
# [[durable_objects.bindings]]
# name = "REFERRAL_ROOM"
# class_name = "ReferralRoomDO"
# [[migrations]]
# tag = "v1"
# new_classes = ["ReferralRoomDO"]

# Environment Variables (must match your R2 bucket's Public Development URL)
[vars]
NEXT_PUBLIC_SITE_URL = "https://maayaauvuu.com"
R2_PUBLIC_URL = "https://pub-4cd9628710df4d9285813065e654a9c7.r2.dev"
R2_BUCKET_NAME = "commerceq"

# Environment Variables Configuration
# 
# CRITICAL: Set these environment variables in Cloudflare Dashboard for deployment
# 
# 1. Go to Cloudflare Dashboard → Workers & Pages → Your Worker → Settings → Variables and Secrets
# 2. Add the following REQUIRED variables:
#
#    SUPABASE CONFIGURATION (REQUIRED):
#    - NEXT_PUBLIC_SUPABASE_URL: Your Supabase project URL
#      Example: https://xxxxxxxxxxxxx.supabase.co
#      (Found in Supabase Dashboard → Settings → API → Project URL)
#
#    - NEXT_PUBLIC_SUPABASE_ANON_KEY: Your Supabase anonymous key
#      Example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
#      (Found in Supabase Dashboard → Settings → API → Project API keys → anon public)
#
#    - SUPABASE_SERVICE_ROLE_KEY: Your Supabase service_role key (REQUIRED for admin APIs)
#      Add as Encrypted secret. Required for admin user role changes (Эрх хасах/Админ болгох).
#      (Found in Supabase Dashboard → Settings → API → Project API keys → service_role)
#
#    - NEXT_PUBLIC_SITE_URL: Your deployed site URL
#      Example: https://your-site.pages.dev
#
#    CLOUDFLARE IMAGES (OPTIONAL):
#    - CLOUDFLARE_ACCOUNT_ID: Your Cloudflare Account ID
#      (Found in Cloudflare Dashboard → Right sidebar)
#
#    - CLOUDFLARE_IMAGES_API_TOKEN: Your Cloudflare Images API Token
#      (Create at https://dash.cloudflare.com/profile/api-tokens)
#      Permissions needed: Account → Cloudflare Images → Edit
#
#    HERO BANNERS (optional fallback when Supabase is down or hero_banners empty):
#    - NEXT_PUBLIC_HERO_FALLBACK_IMAGE_URL: Full URL to a default hero image
#      Example: https://pub-4cd9628710df4d9285813065e654a9c7.r2.dev/products/your-banner.jpg
#
#    R2 (for uploads and hero image URLs):
#    - R2_PUBLIC_URL: Your R2 bucket Public URL (see R2 → bucket → Public Development URL)
#    - R2_BUCKET_NAME: Your bucket name (e.g. commerceq)
#
# Note: For sensitive values (API tokens), use "Encrypted" secrets in the dashboard.
#
# For local development, create a .env.local file with these values.
# Never commit .env.local to git!
