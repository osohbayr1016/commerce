name = "commerce"
compatibility_date = "2024-12-30"
compatibility_flags = ["nodejs_compat"]

# Cloudflare Workers configuration
main = ".open-next/worker.js"

[assets]
directory = ".open-next/assets"
binding = "ASSETS"

[images]
binding = "IMAGES"

# R2 Bucket Binding
[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "commerce"

# Durable Objects Bindings (Optional - for realtime features)
# Uncomment when ready to deploy Durable Objects
# [[durable_objects.bindings]]
# name = "REFERRAL_ROOM"
# class_name = "ReferralRoomDO"
# [[migrations]]
# tag = "v1"
# new_classes = ["ReferralRoomDO"]

# Environment Variables
[vars]
R2_PUBLIC_URL = "https://pub-917070bb7d724798b2b631d35c140746.r2.dev"

# Environment Variables Configuration
# 
# CRITICAL: Set these environment variables in Cloudflare Dashboard for deployment
# 
# 1. Go to Cloudflare Dashboard → Workers & Pages → Your Worker → Settings → Variables and Secrets
# 2. Add the following REQUIRED variables:
#
#    SUPABASE CONFIGURATION (REQUIRED):
#    - NEXT_PUBLIC_SUPABASE_URL: Your Supabase project URL
#      Example: https://xxxxxxxxxxxxx.supabase.co
#      (Found in Supabase Dashboard → Settings → API → Project URL)
#
#    - NEXT_PUBLIC_SUPABASE_ANON_KEY: Your Supabase anonymous key
#      Example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
#      (Found in Supabase Dashboard → Settings → API → Project API keys → anon public)
#
#    - NEXT_PUBLIC_SITE_URL: Your deployed site URL
#      Example: https://your-site.pages.dev
#
#    CLOUDFLARE IMAGES (OPTIONAL):
#    - CLOUDFLARE_ACCOUNT_ID: Your Cloudflare Account ID
#      (Found in Cloudflare Dashboard → Right sidebar)
#
#    - CLOUDFLARE_IMAGES_API_TOKEN: Your Cloudflare Images API Token
#      (Create at https://dash.cloudflare.com/profile/api-tokens)
#      Permissions needed: Account → Cloudflare Images → Edit
#
# Note: For sensitive values (API tokens), use "Encrypted" secrets in the dashboard.
#
# For local development, create a .env.local file with these values.
# Never commit .env.local to git!
