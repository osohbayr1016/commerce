(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9284,e=>{"use strict";var s=e.i(43476),t=e.i(71645);function l({node:e,onNodeClick:r}){let[a,n]=(0,t.useState)(e.level<2),i=e.children&&e.children.length>0,o=24*e.level;return(0,s.jsxs)("div",{style:{marginLeft:`${o}px`},className:"mb-2",children:[(0,s.jsxs)("div",{className:`flex items-center gap-3 p-3 rounded-lg border transition-colors cursor-pointer ${e.is_top6?"border-yellow-300 bg-yellow-50 hover:bg-yellow-100":"border-gray-200 bg-white hover:bg-gray-50"}`,onClick:()=>r(e),children:[i&&(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),n(!a)},className:"text-gray-500 hover:text-gray-700",children:a?"â–¼":"â–¶"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-900",children:e.name}),e.is_top6&&(0,s.jsx)("span",{className:"px-2 py-0.5 bg-yellow-500 text-white text-xs rounded-full",children:"Top 6"})]}),e.promo_code&&(0,s.jsx)("p",{className:"text-xs font-mono text-gray-500 mt-1",children:e.promo_code}),(0,s.jsxs)("div",{className:"flex gap-4 mt-2 text-xs",children:[(0,s.jsxs)("span",{className:"text-gray-600",children:["Referrals: ",(0,s.jsx)("span",{className:"font-semibold",children:e.referral_count})]}),(0,s.jsxs)("span",{className:"text-yellow-600",children:["Discount: ",(0,s.jsxs)("span",{className:"font-semibold",children:[e.discount_percent,"%"]})]}),(0,s.jsxs)("span",{className:"text-gray-400",children:["Level: ",e.level]})]})]})]}),a&&i&&(0,s.jsx)("div",{className:"mt-2",children:e.children.map(e=>(0,s.jsx)(l,{node:e,onNodeClick:r},e.id))})]})}function r(){let[e,r]=(0,t.useState)([]),[a,n]=(0,t.useState)(!0),[i,o]=(0,t.useState)(null),[d,c]=(0,t.useState)("top6"),[x,m]=(0,t.useState)("");(0,t.useEffect)(()=>{h()},[d]);let h=async()=>{n(!0);try{let e="top6"===d?"/api/admin/referral-network?top6Only=true":x?`/api/admin/referral-network?userId=${x}`:"/api/admin/referral-network",s=await fetch(e);if(s.ok){let e=await s.json();r("top6"===d?e.top6_networks||[]:[e.network])}}catch(e){console.error("Failed to fetch networks:",e)}finally{n(!1)}},p=e=>{o(e)};return a?(0,s.jsx)("div",{className:"text-center py-8",children:"Ð£Ð½ÑˆÐ¸Ð¶ Ð±Ð°Ð¹Ð½Ð°..."}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Referral Network Viewer"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>c("top6"),className:`px-4 py-2 rounded-lg text-sm font-medium transition ${"top6"===d?"bg-yellow-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Top 6 Networks"}),(0,s.jsx)("button",{onClick:()=>c("user"),className:`px-4 py-2 rounded-lg text-sm font-medium transition ${"user"===d?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Specific User"})]})]}),"user"===d&&(0,s.jsxs)("div",{className:"flex gap-3 mb-4",children:[(0,s.jsx)("input",{type:"text",value:x,onChange:e=>m(e.target.value),placeholder:"User ID Ð¾Ñ€ÑƒÑƒÐ»Ð½Ð° ÑƒÑƒ...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,s.jsx)("button",{onClick:h,className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition",children:"Ð¥Ð°Ð¹Ñ…"})]}),(0,s.jsx)("div",{className:"text-xs text-gray-500 mb-4",children:"ðŸ’¡ Node Ð´ÑÑÑ€ Ð´Ð°Ñ€Ð¶ Ð´ÑÐ»Ð³ÑÑ€ÑÐ½Ð³Ò¯Ð¹ Ñ…Ð°Ñ€Ð°Ñ…. â–¶/â–¼ Ð´Ð°Ñ€Ð¶ Ð·Ð°Ð´Ð»Ð°Ñ…/Ñ…ÑƒÑ€Ð°Ð°Ñ…"})]}),0===e.length?(0,s.jsx)("div",{className:"bg-white border border-gray-200 rounded-xl p-8 text-center text-gray-500",children:"ÐœÑÐ´ÑÑÐ»ÑÐ» Ð¾Ð»Ð´ÑÐ¾Ð½Ð³Ò¯Ð¹"}):(0,s.jsx)("div",{className:"space-y-4",children:"top6"===d?e.map(e=>(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.top6Member.full_name||"Ð¥ÑÑ€ÑÐ³Ð»ÑÐ³Ñ‡"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[e.top6Member.promo_code," â€¢ ",e.top6Member.total_referrals," referrals"]})]}),e.network?(0,s.jsx)(l,{node:e.network,onNodeClick:p}):(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Referral Ð±Ð°Ð¹Ñ…Ð³Ò¯Ð¹"})]},e.top6Member.id)):(0,s.jsx)("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:e[0]?(0,s.jsx)(l,{node:e[0],onNodeClick:p}):(0,s.jsx)("p",{className:"text-gray-500 text-center py-8",children:"ÐœÑÐ´ÑÑÐ»ÑÐ» Ð±Ð°Ð¹Ñ…Ð³Ò¯Ð¹"})})}),i&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Node Details"}),(0,s.jsx)("button",{onClick:()=>o(null),className:"text-gray-500 hover:text-gray-700",children:"âœ•"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"ÐÑÑ€"}),(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:i.name})]}),i.promo_code&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Promo Code"}),(0,s.jsx)("p",{className:"font-mono font-semibold text-gray-900",children:i.promo_code})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Referrals"}),(0,s.jsx)("p",{className:"text-lg font-bold text-gray-900",children:i.referral_count})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Discount"}),(0,s.jsxs)("p",{className:"text-lg font-bold text-yellow-600",children:[i.discount_percent,"%"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Level"}),(0,s.jsx)("p",{className:"text-lg font-bold text-gray-900",children:i.level})]})]}),i.is_top6&&(0,s.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,s.jsx)("p",{className:"text-sm font-semibold text-yellow-800",children:"â­ Top 6 Member"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Children"}),(0,s.jsxs)("p",{className:"font-semibold text-gray-900",children:[i.children?.length||0," direct referrals"]})]})]}),(0,s.jsx)("button",{onClick:()=>o(null),className:"w-full mt-6 px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition",children:"Ð¥Ð°Ð°Ñ…"})]})})]})}e.s(["default",()=>r])}]);