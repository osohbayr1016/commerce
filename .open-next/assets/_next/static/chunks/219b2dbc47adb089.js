(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,41058,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(57688),a=e.i(75157),l=e.i(18566),n=e.i(57951),i=e.i(75144),o=e.i(78590),d=e.i(37902);function c({trigger:e,onComplete:s}){let[a,l]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{if(e){l(!0);let e=setTimeout(()=>{l(!1),s?.()},600);return()=>clearTimeout(e)}},[e,s]),a)?(0,t.jsxs)("div",{className:"jsx-4c470673f45c13f fixed inset-0 pointer-events-none z-50",children:[(0,t.jsx)("div",{className:"jsx-4c470673f45c13f absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:(0,t.jsxs)("div",{className:"jsx-4c470673f45c13f animate-bounce-in bg-green-500 text-white px-6 py-3 rounded-full shadow-lg flex items-center gap-2",children:[(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-4c470673f45c13f w-5 h-5",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7",className:"jsx-4c470673f45c13f"})}),(0,t.jsx)("span",{className:"jsx-4c470673f45c13f font-medium",children:"Ð¡Ð°Ð³ÑÐ°Ð½Ð´ Ð½ÑÐ¼ÑÐ³Ð´Ð»ÑÑ!"})]})}),(0,t.jsx)(d.default,{id:"4c470673f45c13f",children:"@keyframes bounce-in{0%{opacity:0;transform:translate(-50%,-50%)scale(0)}50%{opacity:1;transform:translate(-50%,-50%)scale(1.1)}to{opacity:0;transform:translate(-50%,-50%)scale(1)}}.animate-bounce-in.jsx-4c470673f45c13f{animation:.6s ease-out bounce-in}"})]}):null}function u({product:e,slug:s}){let{user:a}=(0,n.useAuth)(),{addItem:d,items:u}=(0,i.useCart)(),{showToast:x}=(0,o.useToast)();(0,l.useRouter)(),(0,l.usePathname)();let[m,h]=(0,r.useState)(null),[g,p]=(0,r.useState)(!1),[f,y]=(0,r.useState)(null),[b,v]=(0,r.useState)(!1),j=async()=>{if(e.id)try{let t=await fetch(`/api/products/${e.id}/stock`);if(t.ok){let e=await t.json();h(e.stock)}}catch(e){}};(0,r.useEffect)(()=>{e.id&&j()},[e.id]);let w=async()=>{if(e.id){p(!0),y(null);try{let t=await fetch(`/api/products/${e.id}/stock`);if(!t.ok)throw Error("Ð‘Ò¯Ñ‚ÑÑÐ³Ð´ÑÑ…Ò¯Ò¯Ð½ Ð¾Ð»Ð´ÑÐ¾Ð½Ð³Ò¯Ð¹");let r=await t.json(),a=u.find(t=>t.id===e.id)?.quantity||0;if(r.stock<a+1){y(0===r.stock?"Ð‘ÑÐ»ÑÐ½ Ð±Ð°Ñ€Ð°Ð° Ð±Ð°Ð¹Ñ…Ð³Ò¯Ð¹":`Ð—Ó©Ð²Ñ…Ó©Ð½ ${r.stock} ÑˆÐ¸Ñ€Ñ…ÑÐ³ Ò¯Ð»Ð´ÑÑÐ½`),p(!1);return}if(!e.id){y("Ð‘Ò¯Ñ‚ÑÑÐ³Ð´ÑÑ…Ò¯Ò¯Ð½Ð¸Ð¹ ID Ð¾Ð»Ð´ÑÐ¾Ð½Ð³Ò¯Ð¹"),p(!1);return}let l=await d({id:String(e.id),name:e.nameEn||e.nameMn||"",price:e.price||0,originalPrice:e.originalPrice||e.price||0,quantity:1,slug:s,brand:e.brand,imageColor:e.imageColor,brandColor:e.brandColor,images:e.images});l.ok?(await j(),v(!0),x(`${e.nameEn||e.nameMn||"Ð‘Ò¯Ñ‚ÑÑÐ³Ð´ÑÑ…Ò¯Ò¯Ð½"} ÑÐ°Ð³ÑÐ°Ð½Ð´ Ð½ÑÐ¼ÑÐ³Ð´Ð»ÑÑ`,"success")):(y(l.error||"Ð¡Ð°Ð³ÑÐ»Ð°Ñ…Ð°Ð´ Ð°Ð»Ð´Ð°Ð° Ð³Ð°Ñ€Ð»Ð°Ð°"),x(l.error||"Ð¡Ð°Ð³ÑÐ»Ð°Ñ…Ð°Ð´ Ð°Ð»Ð´Ð°Ð° Ð³Ð°Ñ€Ð»Ð°Ð°","error"))}catch(e){y(e instanceof Error?e.message:"ÐÐ»Ð´Ð°Ð° Ð³Ð°Ñ€Ð»Ð°Ð°")}finally{p(!1)}}},N=null!==m&&0===m;return(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)("button",{onClick:w,disabled:N||g,className:`w-full rounded-full border px-3 py-2 text-xs transition-colors ${N?"border-gray-200 text-gray-400 cursor-not-allowed bg-gray-50":"border-gray-200 text-gray-700 hover:border-gray-300 hover:text-gray-900"} ${g?"opacity-50 cursor-not-allowed":""}`,children:g?"Ð¢Ò¯Ñ€ Ñ…Ò¯Ð»ÑÑÐ½Ñ Ò¯Ò¯...":N?"Ð‘ÑÐ»ÑÐ½ Ð±Ð°Ñ€Ð°Ð° Ð±Ð°Ð¹Ñ…Ð³Ò¯Ð¹":"Ð¡Ð°Ð³ÑÐ»Ð°Ñ…"}),f&&(0,t.jsx)("p",{className:"mt-1 text-xs text-red-600 text-center",children:f}),null!==m&&m>0&&m<5&&!f&&(0,t.jsxs)("p",{className:"mt-1 text-xs text-orange-600 text-center",children:["Ð—Ó©Ð²Ñ…Ó©Ð½ ",m," ÑˆÐ¸Ñ€Ñ…ÑÐ³ Ò¯Ð»Ð´ÑÑÐ½"]}),(0,t.jsx)(c,{trigger:b,onComplete:()=>v(!1)})]})}var x=e.i(11795);function m({productId:e,className:s=""}){let{user:a}=(0,n.useAuth)(),{showToast:l}=(0,o.useToast)(),[i,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),m=(0,x.createClient)();(0,r.useEffect)(()=>{a&&e&&h()},[a,e]);let h=async()=>{if(a)try{let{data:t}=await m.from("wishlist").select("id").eq("user_id",a.id).eq("product_id",e).single();d(!!t)}catch{d(!1)}},g=async t=>{if(t.preventDefault(),t.stopPropagation(),!a)return void l("Ð­Ñ…Ð»ÑÑÐ´ Ð½ÑÐ²Ñ‚ÑÑ€Ð½Ñ Ò¯Ò¯","info");u(!0);try{if(i){let{error:t}=await m.from("wishlist").delete().eq("user_id",a.id).eq("product_id",e);if(t)throw t;d(!1),l("Ð¥Ð°Ð´Ð³Ð°Ð»ÑÐ°Ð½ Ð±Ò¯Ñ‚ÑÑÐ³Ð´ÑÑ…Ò¯Ò¯Ð½ÑÑÑ Ñ…Ð°ÑÐ°Ð²","success")}else{let{error:t}=await m.from("wishlist").insert({user_id:a.id,product_id:e});if(t)throw t;d(!0),l("Ð¥Ð°Ð´Ð³Ð°Ð»ÑÐ°Ð½ Ð±Ò¯Ñ‚ÑÑÐ³Ð´ÑÑ…Ò¯Ò¯Ð½Ð´ Ð½ÑÐ¼ÑÐ³Ð´Ð»ÑÑ","success")}}catch(e){l("ÐÐ»Ð´Ð°Ð° Ð³Ð°Ñ€Ð»Ð°Ð°","error")}finally{u(!1)}};return(0,t.jsx)("button",{onClick:g,disabled:c,className:`${s} transition-colors ${i?"text-red-500 hover:text-red-600":"text-gray-400 hover:text-red-500"} ${c?"opacity-50 cursor-not-allowed":""}`,"aria-label":i?"Ð¥Ð°Ð´Ð³Ð°Ð»ÑÐ°Ð½ Ð±Ò¯Ñ‚ÑÑÐ³Ð´ÑÑ…Ò¯Ò¯Ð½ÑÑÑ Ñ…Ð°ÑÐ°Ñ…":"Ð¥Ð°Ð´Ð³Ð°Ð»ÑÐ°Ð½ Ð±Ò¯Ñ‚ÑÑÐ³Ð´ÑÑ…Ò¯Ò¯Ð½Ð´ Ð½ÑÐ¼ÑÑ…",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:i?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})}function h({product:e,isOpen:n,onClose:i}){let o=(0,l.useRouter)(),[d,c]=(0,r.useState)(null),x=e.id?(0,a.generateSlug)(`${e.brand} ${e.nameEn}`,e.id):"";if((0,r.useEffect)(()=>{e.id&&fetch(`/api/products/${e.id}/stock`).then(e=>e.json()).then(e=>c(e.stock)).catch(()=>{})},[e.id]),(0,r.useEffect)(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),!n)return null;let h=e=>new Intl.NumberFormat("mn-MN").format(e);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-white z-40",onClick:i}),(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl border border-gray-200 pointer-events-auto",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Ð‘Ò¯Ñ‚ÑÑÐ³Ð´ÑÑ…Ò¯Ò¯Ð½Ð¸Ð¹ Ð¼ÑÐ´ÑÑÐ»ÑÐ»"}),(0,t.jsx)("button",{onClick:i,className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsx)("div",{children:e.images&&e.images.length>0&&e.images[0]?(0,t.jsx)("div",{className:"w-full aspect-square rounded border border-gray-200 overflow-hidden relative",children:(0,t.jsx)(s.default,{src:e.images[0],alt:e.nameEn||e.nameMn||"Product",fill:!0,sizes:"(max-width: 768px) 100vw, 50vw",className:"object-cover",priority:!0})}):(0,t.jsx)("div",{className:"w-full aspect-square rounded border border-gray-200 bg-gray-50",style:{backgroundColor:e.imageColor}})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-4 flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-2xl font-semibold text-gray-900 mb-2",children:e.nameEn}),(0,t.jsx)("p",{className:"text-gray-600 mb-2",children:e.nameMn}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e.brand})]}),e.id&&(0,t.jsx)(m,{productId:String(e.id)})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsxs)("span",{className:"text-3xl font-bold text-gray-900",children:[h(e.price)," â‚®"]}),(0,t.jsxs)("span",{className:"text-lg text-gray-400 line-through",children:[h(e.originalPrice)," â‚®"]}),e.discount&&(0,t.jsxs)("span",{className:"text-sm bg-red-100 text-red-700 px-2 py-1 rounded",children:["-",e.discount,"%"]})]}),null!==d&&d>0&&d<5&&(0,t.jsxs)("p",{className:"text-sm text-orange-600",children:["Ð—Ó©Ð²Ñ…Ó©Ð½ ",d," ÑˆÐ¸Ñ€Ñ…ÑÐ³ Ò¯Ð»Ð´ÑÑÐ½"]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(u,{product:e,slug:x}),(0,t.jsx)("button",{onClick:()=>{o.push(`/products/${x}`),i()},className:"w-full rounded-full border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Ð”ÑÐ»Ð³ÑÑ€ÑÐ½Ð³Ò¯Ð¹ Ò¯Ð·ÑÑ…"})]})]})]})})]})})]})}function g({product:e}){let[l,n]=(0,r.useState)(null),[i,o]=(0,r.useState)(!1),d=e=>new Intl.NumberFormat("mn-MN").format(e),c=e.id?(0,a.generateSlug)(`${e.brand} ${e.nameEn}`,e.id):"",x=e=>{e.preventDefault(),o(!0)};(0,r.useEffect)(()=>{e.id&&fetch(`/api/products/${e.id}/stock`).then(e=>e.ok?e.json():{stock:null}).then(e=>{e&&"number"==typeof e.stock&&n(e.stock)}).catch(()=>{})},[e.id]);let g=null!==l&&0===l;return(0,t.jsxs)("div",{className:`group border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow bg-white flex flex-col h-full relative ${g?"opacity-75":""}`,children:[e.id&&(0,t.jsx)("div",{className:"absolute top-4 right-4 z-10",children:(0,t.jsx)(m,{productId:String(e.id)})}),(0,t.jsxs)("a",{href:`/products/${c}`,className:"flex flex-col flex-1",children:[(0,t.jsxs)("div",{className:"mb-3 relative",children:[(0,t.jsx)("div",{className:"w-16 h-8 rounded border border-gray-200 bg-gray-50",style:{backgroundColor:e.brandColor}}),g&&(0,t.jsx)("span",{className:"absolute top-0 right-0 px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:"Ð‘ÑÐ»ÑÐ½ Ð±Ð°Ñ€Ð°Ð° Ð±Ð°Ð¹Ñ…Ð³Ò¯Ð¹"}),null!==l&&l>0&&l<5&&!g&&(0,t.jsxs)("span",{className:"absolute top-0 right-0 px-2 py-0.5 bg-orange-100 text-orange-700 text-xs font-medium rounded",children:[l," ÑˆÐ¸Ñ€Ñ…ÑÐ³ Ò¯Ð»Ð´ÑÑÐ½"]})]}),(0,t.jsx)("div",{className:"mb-4 relative group/image",children:e.images&&e.images.length>0&&e.images[0]?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-full aspect-square rounded border border-gray-200 overflow-hidden relative cursor-pointer",onClick:x,children:(0,t.jsx)(s.default,{src:e.images[0],alt:e.nameEn||e.nameMn||"Product",fill:!0,sizes:"(max-width: 640px) 50vw, (max-width: 1024px) 33vw, 25vw",className:"object-cover",loading:"lazy"})}),(0,t.jsx)("button",{onClick:x,className:"absolute inset-0 bg-black bg-opacity-0 group-hover/image:bg-opacity-10 transition-opacity flex items-center justify-center opacity-0 group-hover/image:opacity-100",children:(0,t.jsx)("span",{className:"bg-white px-4 py-2 rounded-lg text-sm font-medium text-gray-900 shadow-lg",children:"Ð¥ÑƒÑ€Ð´Ð°Ð½ Ò¯Ð·ÑÑ…"})})]}):(0,t.jsx)("div",{className:"w-full aspect-square rounded border border-gray-200 bg-gray-50 cursor-pointer",style:{backgroundColor:e.imageColor},onClick:x})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-sm md:text-base font-medium text-gray-900 mb-2 line-clamp-2 leading-snug min-h-[2.5rem]",children:e.nameEn}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-3 line-clamp-1 min-h-[1.25rem]",children:e.nameMn}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsxs)("span",{className:"text-base md:text-lg font-semibold text-gray-900",children:[d(e.price)," â‚®"]}),(0,t.jsxs)("span",{className:"text-sm text-gray-400 line-through",children:[d(e.originalPrice)," â‚®"]}),e.discount&&(0,t.jsxs)("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded border border-gray-200",children:["-",e.discount,"%"]})]})]})]}),(0,t.jsx)("div",{className:"pt-3 mt-auto",children:(0,t.jsx)(u,{product:e,slug:c})}),(0,t.jsx)(h,{product:e,isOpen:i,onClose:()=>o(!1)})]})}e.s(["default",()=>g],41058)},53197,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(57688),a=e.i(18566),l=e.i(75157);function n({onClose:e,initialQuery:n=""}){let[i,o]=(0,r.useState)(n),[d,c]=(0,r.useState)([]),[u,x]=(0,r.useState)(!1),[m,h]=(0,r.useState)(-1),[g,p]=(0,r.useState)(!1),f=(0,a.useRouter)(),y=(0,r.useRef)(null),b=(0,r.useRef)(null),v=(0,r.useRef)(null);(0,r.useEffect)(()=>{y.current&&y.current.focus()},[]),(0,r.useEffect)(()=>{n&&n!==i&&o(n)},[n]),(0,r.useEffect)(()=>{if(i.length<2){c([]),p(!1);return}return v.current&&clearTimeout(v.current),x(!0),p(!0),v.current=setTimeout(async()=>{try{let e=await fetch(`/api/search/autocomplete?q=${encodeURIComponent(i)}`);if(e.ok){let t=await e.json();c(t.results||[])}else c([])}catch(e){c([])}finally{x(!1)}},300),()=>{v.current&&clearTimeout(v.current)}},[i]);let j=t=>{let r=(0,l.generateSlug)(`${t.brand} ${t.name}`,t.id);f.push(`/products/${r}`),o(""),c([]),p(!1),e?.()},w=t=>{t.preventDefault(),i.trim().length>=2&&(f.push(`/search?q=${encodeURIComponent(i.trim())}`),o(""),c([]),p(!1),e?.())};return(0,r.useEffect)(()=>{if(m>=0&&b.current){let e=b.current.children[m];e&&e.scrollIntoView({block:"nearest",behavior:"smooth"})}},[m]),(0,t.jsxs)("div",{className:"relative w-full",children:[(0,t.jsxs)("form",{onSubmit:w,className:"relative",children:[(0,t.jsx)("input",{ref:y,type:"text",value:i,onChange:e=>{o(e.target.value),h(-1)},onKeyDown:t=>{if(!g||0===d.length){"Enter"===t.key&&i.trim().length>=2&&w(t);return}switch(t.key){case"ArrowDown":t.preventDefault(),h(e=>e<d.length-1?e+1:e);break;case"ArrowUp":t.preventDefault(),h(e=>e>0?e-1:-1);break;case"Enter":t.preventDefault(),m>=0&&m<d.length?j(d[m]):i.trim().length>=2&&w(t);break;case"Escape":p(!1),c([]),e?.()}},onFocus:()=>{(d.length>0||i.length>=2)&&p(!0)},placeholder:"Ð‘Ò¯Ñ‚ÑÑÐ³Ð´ÑÑ…Ò¯Ò¯Ð½ Ñ…Ð°Ð¹Ñ…...",className:"w-full rounded-full border border-gray-300 px-4 py-2 pl-10 pr-10 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900"}),(0,t.jsx)("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),i.length>0&&(0,t.jsx)("button",{type:"button",onClick:()=>{o(""),c([]),p(!1),y.current&&y.current.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 hover:text-gray-600","aria-label":"Clear search",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g&&(i.length>=2||d.length>0)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>{p(!1)}}),(0,t.jsx)("div",{ref:b,className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-xl z-20 max-h-96 overflow-y-auto",children:u?(0,t.jsx)("div",{className:"px-4 py-6 text-sm text-gray-500 text-center",children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsxs)("svg",{className:"animate-spin h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Ð¥Ð°Ð¹Ð¶ Ð±Ð°Ð¹Ð½Ð°..."]})}):d.length>0?(0,t.jsx)(t.Fragment,{children:d.map((e,r)=>(0,t.jsxs)("button",{onClick:()=>j(e),className:`w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors text-left border-b border-gray-100 last:border-b-0 ${r===m?"bg-gray-50":""} ${0===r?"rounded-t-lg":""} ${r===d.length-1?"rounded-b-lg":""}`,children:[e.image?(0,t.jsx)("div",{className:"w-12 h-12 rounded border border-gray-200 flex-shrink-0 overflow-hidden relative",children:(0,t.jsx)(s.default,{src:e.image,alt:e.name,fill:!0,sizes:"48px",className:"object-cover",loading:"lazy"})}):(0,t.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded border border-gray-200 flex-shrink-0"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),e.nameMn&&(0,t.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.nameMn}),(0,t.jsxs)("p",{className:"text-xs text-gray-600 mt-0.5",children:[e.brand&&`${e.brand} â€¢ `,new Intl.NumberFormat("mn-MN").format(e.price)," â‚®"]})]})]},e.id))}):i.length>=2?(0,t.jsxs)("div",{className:"px-4 py-6 text-sm text-gray-500 text-center",children:[(0,t.jsx)("p",{children:"Ð˜Ð»ÑÑ€Ñ† Ð¾Ð»Ð´ÑÐ¾Ð½Ð³Ò¯Ð¹"}),(0,t.jsxs)("p",{className:"text-xs mt-1 text-gray-400",children:['"',i,'" Ð³ÑÑÑÐ½ Ñ…Ð°Ð¹Ð»Ñ‚Ð°Ð°Ñ€ Ð±Ò¯Ñ‚ÑÑÐ³Ð´ÑÑ…Ò¯Ò¯Ð½ Ð¾Ð»Ð´ÑÐ¾Ð½Ð³Ò¯Ð¹']})]}):null})]})]})}e.s(["default",()=>n])},39284,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(57688),a=e.i(22016),l=e.i(18566),n=e.i(57951);function i(){let[e,s]=(0,r.useState)(!1),i=(0,r.useRef)(null),{user:o,profile:d,signOut:c,isAdmin:u}=(0,n.useAuth)(),x=(0,l.useRouter)();(0,r.useEffect)(()=>{function e(e){i.current&&!i.current.contains(e.target)&&s(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let m=async()=>{try{await c(),s(!1),x.push("/")}catch(e){}};return o?(0,t.jsxs)("div",{className:"relative",ref:i,children:[(0,t.jsxs)("button",{onClick:()=>s(!e),className:"flex items-center space-x-2 text-gray-700 hover:text-gray-900",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-900 flex items-center justify-center text-white font-medium text-sm",children:d?.full_name?.[0]?.toUpperCase()||"U"}),(0,t.jsx)("svg",{className:`w-4 h-4 transition-transform ${e?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e&&(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[(0,t.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:d?.full_name||"Ð¥ÑÑ€ÑÐ³Ð»ÑÐ³Ñ‡"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:o.user_metadata?.phone_number||o.phone||o.email?.replace("@phone.app","")}),u&&(0,t.jsx)("span",{className:"inline-block mt-2 px-2 py-1 text-xs font-medium bg-gray-900 text-white rounded",children:"ÐÐ´Ð¼Ð¸Ð½"})]}),(0,t.jsxs)("div",{className:"py-2",children:[(0,t.jsx)(a.default,{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>s(!1),children:"ðŸ‘¤ ÐœÐ¸Ð½Ð¸Ð¹ Ð¿Ñ€Ð¾Ñ„Ð°Ð¹Ð»"}),(0,t.jsx)(a.default,{href:"/profile?tab=orders",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>s(!1),children:"ðŸ“¦ ÐœÐ¸Ð½Ð¸Ð¹ Ð·Ð°Ñ…Ð¸Ð°Ð»Ð³Ð°"}),(0,t.jsx)(a.default,{href:"/profile?tab=wishlist",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>s(!1),children:"â¤ï¸ Ð¥Ð°Ð´Ð³Ð°Ð»ÑÐ°Ð½"}),u&&(0,t.jsx)(a.default,{href:"/admin",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>s(!1),children:"ÐÐ´Ð¼Ð¸Ð½ ÑÐ°Ð¼Ð±Ð°Ñ€"})]}),(0,t.jsx)("div",{className:"border-t border-gray-200 pt-2",children:(0,t.jsx)("button",{onClick:m,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:"Ð“Ð°Ñ€Ð°Ñ…"})})]})]}):(0,t.jsx)(a.default,{href:"/auth/login",className:"hidden md:inline-flex text-gray-700 hover:text-gray-900 text-sm md:text-base whitespace-nowrap font-medium",children:"Ð½ÑÐ²Ñ‚Ñ€ÑÑ…/Ð±Ò¯Ñ€Ñ‚Ð³Ò¯Ò¯Ð»ÑÑ…"})}var o=e.i(53197);function d({onToggle:e}){let[s,a]=(0,r.useState)(!1),[l,n]=(0,r.useState)(!1),i=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=e=>{"Escape"===e.key&&s&&c()};return s?(document.addEventListener("keydown",e),setTimeout(()=>n(!0),10)):n(!1),()=>{document.removeEventListener("keydown",e)}},[s]),(0,r.useEffect)(()=>{e?.(s)},[s,e]);let d=()=>{a(!0)},c=()=>{n(!1),setTimeout(()=>a(!1),300)},u=e=>{i.current&&!i.current.contains(e.target)&&c()};return((0,r.useEffect)(()=>(s&&document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}),[s]),s)?(0,t.jsxs)("div",{ref:i,className:"flex-1 md:flex-initial min-w-0 flex items-center justify-end md:justify-start overflow-hidden",children:[(0,t.jsx)("div",{className:"hidden md:block relative z-20",children:(0,t.jsx)("div",{className:`transition-all duration-300 ease-out overflow-visible ${l?"w-[400px] opacity-100":"w-9 opacity-0"}`,style:{transitionProperty:"width, opacity"},children:(0,t.jsx)("div",{className:"relative w-full",children:(0,t.jsx)(o.default,{onClose:c})})})}),(0,t.jsx)("div",{className:"md:hidden flex-1 flex items-center min-w-0 overflow-hidden pl-1",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 min-w-0 overflow-hidden transition-[width,opacity] duration-300 ease-out",style:{width:l?"100%":"0%",opacity:+!!l},children:[(0,t.jsx)("div",{className:"w-full min-w-0 shrink overflow-hidden",children:(0,t.jsx)(o.default,{onClose:c})}),(0,t.jsx)("button",{type:"button",onClick:c,className:"shrink-0 flex items-center justify-center w-9 h-9 rounded-full border border-gray-200 text-gray-600 hover:text-gray-900 hover:border-gray-300 transition-colors","aria-label":"Ð¥Ð°Ð¹Ð»Ñ‚ Ñ…Ð°Ð°Ñ…",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:d,className:"hidden md:flex items-center justify-center w-9 h-9 rounded-full border border-gray-200 text-gray-600 hover:text-gray-900 hover:border-gray-300 transition-all duration-200","aria-label":"Ð¥Ð°Ð¹Ð»Ñ‚ Ð½ÑÑÑ…",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,t.jsx)("button",{onClick:d,className:"md:hidden inline-flex items-center justify-center w-9 h-9 rounded-full border border-gray-200 text-gray-600 hover:text-gray-900 hover:border-gray-300 transition-colors shrink-0","aria-label":"Ð¥Ð°Ð¹Ð»Ñ‚ Ð½ÑÑÑ…",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}var c=e.i(75144);function u(){let{totalItems:e,openDrawer:r}=(0,c.useCart)();return(0,t.jsxs)("button",{onClick:r,className:"relative inline-flex items-center justify-center w-9 h-9 rounded-full border border-gray-200 text-gray-600 hover:text-gray-900 hover:border-gray-300","aria-label":"cart",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H6.4M7 13l-1.6 8H19M7 13l.4-2M9 21a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"})}),e>0&&(0,t.jsx)("span",{className:"absolute -top-1 -right-1 flex h-5 min-w-[20px] items-center justify-center rounded-full bg-gray-900 px-1.5 text-[10px] font-semibold text-white",children:e>99?"99+":e})]})}var x=e.i(11795);function m(){let{user:e}=(0,n.useAuth)(),[s,l]=(0,r.useState)(0);return(0,r.useEffect)(()=>{if(!e)return void l(0);let t=(0,x.createClient)(),r=async()=>{try{let{count:r,error:s}=await t.from("wishlist").select("*",{count:"exact",head:!0}).eq("user_id",e.id);s||null===r||l(r)}catch(e){}};r();let s=t.channel("wishlist-changes").on("postgres_changes",{event:"*",schema:"public",table:"wishlist",filter:`user_id=eq.${e.id}`},()=>{r()}).subscribe();return()=>{t.removeChannel(s)}},[e]),(0,t.jsxs)(a.default,{href:"/profile?tab=wishlist",className:"relative inline-flex items-center justify-center w-9 h-9 rounded-full border border-gray-200 text-gray-600 hover:text-gray-900 hover:border-gray-300 transition-colors","aria-label":"Ð¥Ð°Ð´Ð³Ð°Ð»ÑÐ°Ð½",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),s>0&&(0,t.jsx)("span",{className:"absolute -top-1 -right-1 flex h-5 min-w-[20px] items-center justify-center rounded-full bg-gray-900 px-1.5 text-[10px] font-semibold text-white",children:s>99?"99+":s})]})}var h=e.i(65999);function g({categories:e}){let[s,l]=(0,r.useState)(!1),[n,i]=(0,r.useState)("entering"),o=(0,r.useRef)(null),d=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(!s)return;i("entering");let e=requestAnimationFrame(()=>{requestAnimationFrame(()=>i("open"))});return()=>cancelAnimationFrame(e)},[s]),(0,r.useEffect)(()=>{if("leaving"!==n)return;let e=d.current;if(!e)return void l(!1);let t=()=>{l(!1),i("entering")};return e.addEventListener("transitionend",t,{once:!0}),()=>e.removeEventListener("transitionend",t)},[n]),(0,r.useEffect)(()=>{function e(e){o.current&&!o.current.contains(e.target)&&"open"===n&&i("leaving")}function t(e){"Escape"===e.key&&"open"===n&&i("leaving")}return s?(document.addEventListener("mousedown",e),document.addEventListener("keydown",t),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",t),document.body.style.overflow=""}},[s,n]);let{openSpinModal:c}=(0,h.useSpinModal)()??{};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>l(!0),className:"lg:hidden inline-flex items-center justify-center w-9 h-9 rounded-full border border-gray-200 text-gray-600 hover:text-gray-900 hover:border-gray-300 transition-colors duration-200 ease-out","aria-label":"Ð¦ÑÑ Ð½ÑÑÑ…",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),s&&(0,t.jsxs)("div",{ref:o,className:"fixed inset-0 z-50 lg:hidden",onClick:()=>"open"===n&&i("leaving"),children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50 transition-opacity duration-300 ease-out",style:{opacity:+("open"===n)}}),(0,t.jsxs)("div",{ref:d,className:"absolute right-0 top-0 h-full w-80 max-w-[85vw] bg-white shadow-xl overflow-y-auto transition-transform duration-300 ease-out",style:{transform:"open"===n?"translateX(0)":"translateX(100%)"},onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Ð¦ÑÑ"}),(0,t.jsx)("button",{onClick:()=>"open"===n&&i("leaving"),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Ð¥Ð°Ð°Ñ…",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("nav",{className:"p-4",children:[(0,t.jsx)("div",{className:"space-y-1",children:[{href:"/",label:"ÐÒ¯Ò¯Ñ€"},{href:"/categories",label:"ÐÐ½Ð³Ð¸Ð»Ð°Ð»"},{href:"/sale",label:"Ð¥ÑÐ¼Ð´Ñ€Ð°Ð»"},{label:"ðŸŽ° Spin",spin:!0},{href:"/profile",label:"ÐŸÑ€Ð¾Ñ„Ð°Ð¹Ð»"}].map(e=>e.spin?(0,t.jsx)("button",{type:"button",onClick:()=>{c?.(),"open"===n&&i("leaving")},className:"block w-full text-left px-4 py-3 text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 rounded-md transition-colors",children:e.label},"spin"):(0,t.jsx)(a.default,{href:e.href,onClick:()=>"open"===n&&i("leaving"),className:"block px-4 py-3 text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 rounded-md transition-colors",children:e.label},e.href))}),e.length>0&&(0,t.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,t.jsx)("h3",{className:"px-4 text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"ÐÐ½Ð³Ð¸Ð»Ð°Ð»"}),(0,t.jsx)("div",{className:"space-y-1",children:e.map(e=>{let r=e.name_mn||e.name_en||e.name;return(0,t.jsx)(a.default,{href:`/categories/${e.slug}`,onClick:()=>"open"===n&&i("leaving"),className:"block px-4 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md transition-colors",children:r},e.id)})})]})]})]})]})]})}function p(){let{user:e,profile:r}=(0,n.useAuth)();return e&&r?(0,t.jsxs)(a.default,{href:"/profile?tab=coins",className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-white border border-gray-300 hover:bg-gray-50 transition-colors",title:"ÐœÐ¸Ð½Ð¸Ð¹ Ð¼Ð¾Ð½ÐµÑ‚",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-gray-700",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.43 2.1-1.43 1.38 0 1.9.66 1.94 1.64h1.71c-.05-1.34-.87-2.57-2.49-2.97V5H10.9v1.69c-1.51.32-2.72 1.3-2.72 2.81 0 1.79 1.49 2.69 3.66 3.21 1.95.46 2.34 1.15 2.34 1.87 0 .53-.39 1.39-2.1 1.39-1.6 0-2.23-.72-2.32-1.64H8.04c.1 1.7 1.36 2.66 2.86 2.97V19h2.34v-1.67c1.52-.29 2.72-1.16 2.73-2.77-.01-2.2-1.9-2.96-3.66-3.42z"})}),(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:r.coin_balance?.toLocaleString()||"0"})]}):null}function f({siteName:e,headerCategories:a}){let[l,n]=(0,r.useState)(!1),{openSpinModal:o}=(0,h.useSpinModal)()??{};return(0,t.jsx)("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-6",children:[(0,t.jsxs)("div",{className:"relative flex items-center justify-between h-14 sm:h-16 md:h-18 lg:h-20",children:[(0,t.jsx)("div",{className:`flex items-center shrink-0 z-10 transition-opacity duration-300 ${l?"opacity-70":"opacity-100"}`,children:(0,t.jsx)("a",{href:"/",className:"flex items-center hover:opacity-80 transition-opacity",children:(0,t.jsx)(s.default,{src:"/Screenshot_2026-01-28_at_19.21.32-removebg-preview.png",alt:e,width:300,height:100,className:"h-12 sm:h-16 md:h-20 lg:h-24 w-auto object-contain",priority:!0})})}),(0,t.jsxs)("nav",{className:`hidden lg:flex items-center gap-7 xl:gap-8 text-lg font-semibold text-gray-900 absolute left-1/2 transform transition-all duration-300 ease-out ${l?"-translate-x-1/2 opacity-0 pointer-events-none scale-95":"-translate-x-1/2 opacity-100 pointer-events-auto scale-100"}`,style:{transitionProperty:"opacity, transform, scale"},children:[(0,t.jsx)("a",{href:"/",className:"hover:text-gray-600 transition-colors whitespace-nowrap",children:"ÐÒ¯Ò¯Ñ€"}),(0,t.jsx)("a",{href:"/categories",className:"hover:text-gray-600 transition-colors whitespace-nowrap",children:"ÐÐ½Ð³Ð¸Ð»Ð°Ð»"}),(0,t.jsx)("a",{href:"/sale",className:"hover:text-gray-600 transition-colors whitespace-nowrap",children:"Ð¥ÑÐ¼Ð´Ñ€Ð°Ð»"}),(0,t.jsx)("button",{type:"button",onClick:()=>o?.(),className:"hover:text-gray-600 transition-colors flex items-center gap-1 whitespace-nowrap font-semibold text-gray-900 bg-transparent border-0 cursor-pointer text-lg",children:"ðŸŽ° Spin"}),(0,t.jsx)("a",{href:"/profile",className:"hover:text-gray-600 transition-colors whitespace-nowrap",children:"ÐŸÑ€Ð¾Ñ„Ð°Ð¹Ð»"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 lg:gap-4 z-10 flex-1 md:flex-initial min-w-0 md:min-w-0 justify-end",children:[(0,t.jsx)(d,{onToggle:n}),(0,t.jsxs)("div",{className:`items-center gap-2 sm:gap-3 lg:gap-4 ${l?"hidden md:flex":"flex"}`,children:[(0,t.jsx)(m,{}),(0,t.jsx)(u,{}),(0,t.jsx)("div",{className:"hidden sm:block",children:(0,t.jsx)(p,{})}),(0,t.jsx)(i,{}),(0,t.jsx)(g,{categories:a})]})]})]}),(0,t.jsxs)("div",{className:"hidden sm:flex items-center gap-2 md:gap-3 pb-2.5 md:pb-3 overflow-x-auto",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},children:[(0,t.jsx)("span",{className:"text-xs md:text-sm text-gray-500 font-medium whitespace-nowrap shrink-0",children:"ÐÐ½Ð³Ð¸Ð»Ð°Ð»:"}),(0,t.jsx)("div",{className:"flex items-center gap-2 md:gap-2.5",children:a?.length>0?a.map(e=>{let r=e.name_mn||e.name_en||e.name;return(0,t.jsx)("a",{href:`/categories/${e.slug}`,className:"px-2.5 md:px-3 py-1 text-xs md:text-sm rounded-full border border-gray-200 bg-white text-gray-600 hover:text-gray-900 hover:border-gray-400 hover:shadow-sm transition-all whitespace-nowrap",children:r},e.id)}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("a",{href:"/categories",className:"px-2.5 md:px-3 py-1 text-xs md:text-sm rounded-full border border-gray-200 bg-white text-gray-600 hover:text-gray-900 hover:border-gray-400 hover:shadow-sm transition-all whitespace-nowrap",children:"Ð‘Ò¯Ð³Ð´"}),(0,t.jsx)("a",{href:"/categories/us-order",className:"px-2.5 md:px-3 py-1 text-xs md:text-sm rounded-full border border-gray-200 bg-white text-gray-600 hover:text-gray-900 hover:border-gray-400 hover:shadow-sm transition-all whitespace-nowrap",children:"ÐÐ¼ÐµÑ€Ð¸Ðº Ð·Ð°Ñ…Ð¸Ð°Ð»Ð³Ð°"}),(0,t.jsx)("a",{href:"/categories/local-stock",className:"px-2.5 md:px-3 py-1 text-xs md:text-sm rounded-full border border-gray-200 bg-white text-gray-600 hover:text-gray-900 hover:border-gray-400 hover:shadow-sm transition-all whitespace-nowrap",children:"ÐœÐ¾Ð½Ð³Ð¾Ð» Ð´Ð°Ñ…ÑŒ Ð±ÑÐ»ÑÐ½ Ð±Ð°Ñ€Ð°Ð°"})]})})]})]})})}e.s(["default",()=>f],39284)},88442,e=>{"use strict";var t=e.i(43476);function r({className:e="",shimmer:r=!0}){return(0,t.jsx)("div",{role:"presentation","aria-hidden":!0,className:`rounded bg-gray-200 ${r?"skeleton-shimmer":"animate-pulse"} ${e}`})}e.s(["default",()=>r])},48991,e=>{"use strict";var t=e.i(43476),r=e.i(18566),s=e.i(11110);function a({href:e,className:a=""}){let l=(0,r.useRouter)(),{t:n}=(0,s.useLanguage)();return(0,t.jsxs)("button",{onClick:()=>{e?l.push(e):window.history.length>1?l.back():l.push("/")},className:`inline-flex items-center gap-2 text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors ${a}`,children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),n("common.back")||"Back"]})}e.s(["default",()=>a])},29805,e=>{"use strict";var t=e.i(43476),r=e.i(88442);function s(){return(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 bg-white overflow-hidden",children:[(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsx)(r.default,{className:"w-16 h-8"})}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(r.default,{className:"w-full aspect-square rounded border border-gray-200"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(r.default,{className:"h-4 w-full mb-2"}),(0,t.jsx)(r.default,{className:"h-4 w-3/4 mb-3"}),(0,t.jsx)(r.default,{className:"h-3 w-1/2 mb-3"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r.default,{className:"h-5 w-20"}),(0,t.jsx)(r.default,{className:"h-4 w-16"}),(0,t.jsx)(r.default,{className:"h-4 w-12"})]})]}),(0,t.jsx)("div",{className:"pt-3 mt-auto",children:(0,t.jsx)(r.default,{className:"h-8 w-full rounded-full"})})]})}e.s(["default",()=>s])},66076,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(57688);function a({images:e,imageColor:a,productName:l}){let[n,i]=(0,r.useState)(0),o=e.length||1;return(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,t.jsx)("div",{className:"flex flex-row md:flex-col gap-2 order-2 md:order-1",children:e.map((e,r)=>(0,t.jsx)("button",{onClick:()=>i(r),className:`w-16 h-16 md:w-20 md:h-20 rounded border-2 transition-all overflow-hidden relative ${n===r?"border-gray-900":"border-gray-200 hover:border-gray-400"}`,style:{backgroundColor:a},"aria-label":`View image ${r+1}`,children:e?(0,t.jsx)(s.default,{src:e,alt:`${l} ${r+1}`,fill:!0,sizes:"80px",className:"object-cover",loading:"lazy"}):null},r))}),(0,t.jsx)("div",{className:"flex-1 order-1 md:order-2",children:(0,t.jsx)("div",{className:"w-full aspect-square rounded-lg border border-gray-200 bg-gray-50 flex items-center justify-center relative overflow-hidden",style:{backgroundColor:a},children:e[n]?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.default,{src:e[n],alt:l||"Product Image",fill:!0,sizes:"(max-width: 768px) 100vw, 50vw",className:"object-cover",priority:!0}),(0,t.jsxs)("span",{className:"absolute top-3 right-3 text-xs text-white bg-black bg-opacity-50 px-2 py-1 rounded z-10",children:[n+1," of ",o]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{className:"absolute top-3 right-3 text-xs text-gray-500",children:[n+1," of ",o]}),(0,t.jsx)("span",{className:"text-gray-400 text-sm",children:l||"Product Image"})]})})})]})}e.s(["default",()=>a])},65873,e=>{"use strict";var t=e.i(43476),r=e.i(18566),s=e.i(71645),a=e.i(75157),l=e.i(57951),n=e.i(75144),i=e.i(11110);function o({trigger:e,productImage:t,buttonRef:r,onComplete:a}){let l=(0,s.useRef)(!1);return(0,s.useEffect)(()=>{if(!e||l.current)return;l.current=!0;let s=r.current;if(!s)return void a();let n=window.innerWidth<768,i=document.querySelector(n?'nav.fixed.bottom-0 a[aria-label="cart"]':'header a[aria-label="cart"]');if(!i)return void a();let o=s.getBoundingClientRect(),d=i.getBoundingClientRect(),c=o.left+o.width/2,u=o.top+o.height/2,x=d.left+d.width/2,m=d.top+d.height/2,h=document.createElement("div");h.style.position="fixed",h.style.left=`${c}px`,h.style.top=`${u}px`,h.style.width="50px",h.style.height="50px",h.style.borderRadius="12px",h.style.backgroundColor="#111827",h.style.zIndex="10000",h.style.pointerEvents="none",h.style.transition="all 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55)",h.style.boxShadow="0 10px 25px rgba(0, 0, 0, 0.3)",t&&(t.startsWith("http")||t.startsWith("/")||t.startsWith("data:"))?(h.style.backgroundImage=`url(${t})`,h.style.backgroundSize="cover",h.style.backgroundPosition="center",h.style.backgroundColor="transparent"):(h.style.display="flex",h.style.alignItems="center",h.style.justifyContent="center",h.innerHTML=`
        <svg width="24" height="24" fill="white" viewBox="0 0 24 24">
          <path d="M7 18c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.15.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12L8.1 13h7.45c.75 0 1.41-.41 1.75-1.03L21.7 4H5.21l-.94-2H1zm16 16c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
        </svg>
      `),document.body.appendChild(h),requestAnimationFrame(()=>{h.style.transform="scale(1.2) translateY(-10px)"}),setTimeout(()=>{h.style.transform=`translate(${x-c}px, ${m-u}px) scale(0.5)`,h.style.opacity="0.9"},200),setTimeout(()=>{h.style.opacity="0",h.style.transform=`translate(${x-c}px, ${m-u}px) scale(0.2)`},1e3),setTimeout(()=>{document.body.contains(h)&&document.body.removeChild(h),a(),l.current=!1},1200)},[e,t,r,a]),(0,s.useEffect)(()=>{e||(l.current=!1)},[e]),null}function d({trigger:e,buttonRef:t}){return(0,s.useEffect)(()=>{if(!e)return;let r=document.body,s=(e,t,s)=>{let a=document.createElement("div");a.style.position="fixed",a.style.left=`${e}px`,a.style.top=`${t}px`,a.style.width="6px",a.style.height="6px",a.style.borderRadius="50%",a.style.backgroundColor=["#10b981","#3b82f6","#8b5cf6","#f59e0b","#ef4444","#ec4899"][s%6],a.style.zIndex="9999",a.style.pointerEvents="none",a.style.opacity="1",r.appendChild(a);let l=60+40*Math.random(),n=360*s/12*Math.PI/180,i=e+Math.cos(n)*l,o=t+Math.sin(n)*l;requestAnimationFrame(()=>{a.style.transition="all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1)",a.style.transform=`translate(${i-e}px, ${o-t}px) scale(0)`,a.style.opacity="0"}),setTimeout(()=>{r.contains(a)&&r.removeChild(a)},800)},a=t.current;if(a){let e=a.getBoundingClientRect(),t=e.left+e.width/2,r=e.top+e.height/2;for(let e=0;e<12;e++)setTimeout(()=>{s(t,r,e)},30*e)}return()=>{r.querySelectorAll('[style*="z-index: 9999"]').forEach(e=>{r.contains(e)&&r.removeChild(e)})}},[e,t]),null}var c=e.i(52292);function u({productType:e,colors:r=[],materials:a=[],sizes:l=[],defaultColor:n,defaultMaterial:i,defaultSize:o,onVariantChange:d}){let[u,x]=(0,s.useState)(n),[m,h]=(0,s.useState)(i),[g,p]=(0,s.useState)(o);(0,s.useEffect)(()=>{d({color:u,material:m,size:g})},[u,m,g,d]);let f="beauty"!==e&&l.length>0;return r.length>0||a.length>0||f?(0,t.jsxs)("div",{className:"space-y-6",children:[r.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:["Color",u&&(0,t.jsxs)("span",{className:"ml-2 text-gray-600",children:["- ",u]})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-3",children:r.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>x(e),className:`px-4 py-2 border rounded-lg text-sm font-medium transition ${u===e?"border-blue-600 bg-blue-50 text-blue-700 ring-2 ring-blue-600":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:e},e))})]}),a.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:["Material",m&&(0,t.jsxs)("span",{className:"ml-2 text-gray-600",children:["- ",m]})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-3",children:a.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>h(e),className:`px-4 py-2 border rounded-lg text-sm font-medium transition ${m===e?"border-blue-600 bg-blue-50 text-blue-700 ring-2 ring-blue-600":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:e},e))})]}),f&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:["Size",null!=g&&(0,t.jsxs)("span",{className:"ml-2 text-gray-600",children:["-"," ","clothes"===e&&g in c.CLOTHES_SIZE_LABELS?c.CLOTHES_SIZE_LABELS[g]:g]})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-3",children:l.map(r=>(0,t.jsx)("button",{type:"button",onClick:()=>p(r),className:`px-4 py-2 border rounded-lg text-sm font-medium transition min-w-[60px] ${g===r?"border-blue-600 bg-blue-50 text-blue-700 ring-2 ring-blue-600":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:"clothes"===e&&r in c.CLOTHES_SIZE_LABELS?c.CLOTHES_SIZE_LABELS[r]:r},r))})]}),(u||m||null!=g)&&(0,t.jsx)("div",{className:"pt-4 border-t border-gray-200",children:(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Selected:"," ",(0,t.jsx)("span",{className:"font-medium text-gray-900",children:[u,m,null!=g?"clothes"===e&&g in c.CLOTHES_SIZE_LABELS?c.CLOTHES_SIZE_LABELS[g]:g:null].filter(Boolean).join(" / ")})]})})]}):null}function x({product:e}){let{user:c}=(0,l.useAuth)(),{addItem:x}=(0,n.useCart)(),{t:m}=(0,i.useLanguage)(),h=(0,r.useRouter)();(0,r.usePathname)();let g=(0,s.useRef)(null),[p,f]=(0,s.useState)(!1),[y,b]=(0,s.useState)(!1),[v,j]=(0,s.useState)(!1),[w,N]=(0,s.useState)(void 0),k=!("beauty"!==e.productType&&(e.sizes?.length??0)>0)||null!=w,C=e.description||"ÐœÐ°Ð½Ð°Ð¹ Ð´ÑÐ»Ð³Ò¯Ò¯Ñ€ ÐÐÐ£-Ð°Ð°Ñ Ð±Ð°Ñ€Ð°Ð°Ð³Ð°Ð° Ð¸Ð»Ð³ÑÑÐ´ÑÐ³ Ñ‚ÑƒÐ» Ð·Ð°Ñ…Ð¸Ð°Ð»Ð³Ð° Ð±Ð°Ñ‚Ð°Ð»Ð³Ð°Ð°Ð¶ÑÐ°Ð½Ñ‹ Ð´Ð°Ñ€Ð°Ð° 10â€“14 Ñ…Ð¾Ð½Ð¾Ð³Ð¸Ð¹Ð½ Ð´Ð¾Ñ‚Ð¾Ñ€ ÐœÐ¾Ð½Ð³Ð¾Ð»Ð´ Ð¾Ñ‡Ð¸Ñ… Ð±Ó©Ð³Ó©Ó©Ð´ ÐºÐ°Ñ€Ð³Ð¾Ð½Ñ‹ Ñ‚Ó©Ð»Ð±Ó©Ñ€Ð¸Ð¹Ð³ Ñ‚ÑƒÑÐ°Ð´ Ð½ÑŒ Ñ‚Ó©Ð»Ó©Ñ…Ð¸Ð¹Ð³ Ð°Ð½Ñ…Ð°Ð°Ñ€Ð½Ð° ÑƒÑƒ.",S=t=>{k&&(x({id:String(e.id),name:e.nameEn,price:e.price,originalPrice:e.originalPrice,quantity:1,slug:e.slug,brand:e.brand,imageColor:e.imageColor,brandColor:e.brandColor,images:e.images||[],...null!=w&&{size:w},...e.productType&&{productType:e.productType}}),t||(b(!0),f(!0),j(!0),setTimeout(()=>{b(!1)},1e3),setTimeout(()=>{j(!1)},3e3)),t&&h.push("/checkout"))};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[e.brand&&(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["brand ",e.brand]}),(0,t.jsx)("h1",{className:"text-3xl md:text-4xl font-semibold text-gray-900 mt-2",children:e.nameEn})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("span",{className:"text-3xl md:text-4xl font-semibold text-gray-900",children:[(0,a.formatPrice)(e.price)," â‚®"]}),e.discount>0&&(0,t.jsxs)("span",{className:"text-sm text-gray-500 line-through",children:[(0,a.formatPrice)(e.originalPrice)," â‚®"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[e.discount>0&&(0,t.jsxs)("span",{className:"rounded-full bg-gray-100 px-2 py-1 text-gray-700",children:["-",e.discount,"%"]}),e.savings>0&&(0,t.jsxs)("span",{className:"text-gray-500",children:["Ð¥ÑÐ¼Ð½ÑÐ»Ñ‚: ",(0,a.formatPrice)(e.savings)," â‚®"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Ð‘Ð¾Ð³Ð¸Ð½Ð¾ Ñ‚Ð°Ð¹Ð»Ð±Ð°Ñ€"}),(0,t.jsx)("p",{className:"text-sm md:text-base text-gray-600 leading-relaxed",children:C})]}),(0,t.jsx)(u,{productType:e.productType,sizes:e.sizes,defaultSize:w,onVariantChange:e=>N(e.size)}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,t.jsx)(d,{trigger:y,buttonRef:g}),(0,t.jsx)(o,{trigger:p,productImage:e.images?.[0],buttonRef:g,onComplete:()=>f(!1)}),(0,t.jsx)("button",{ref:g,onClick:()=>S(!1),disabled:!k,className:`flex-1 rounded-lg px-6 py-3 text-white text-base font-medium transition-all duration-500 ${!k?"bg-gray-400 cursor-not-allowed":v?"bg-green-600 hover:bg-green-700 scale-105":"bg-gray-900 hover:bg-gray-800"}`,children:v?m("toast.success")||"ÐÐ¶Ð¸Ð»Ñ‚Ñ‚Ð°Ð¹":"Ð¡Ð°Ð³ÑÐ»Ð°Ñ…"}),(0,t.jsx)("button",{onClick:()=>S(!0),className:"flex-1 rounded-lg border border-gray-900 px-6 py-3 text-gray-900 text-base font-medium hover:bg-gray-50",children:"Ð—Ð°Ñ…Ð¸Ð°Ð»Ð°Ñ…"})]})]})}e.s(["default",()=>x],65873)},43819,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(41058),a=e.i(29805);function l({products:e,loading:r=!1,skeletonCount:l=10}){return r?(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 md:gap-5 lg:gap-6",children:Array.from({length:l}).map((e,r)=>(0,t.jsx)(a.default,{},r))}):(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 md:gap-5 lg:gap-6",children:e.map(e=>(0,t.jsx)(s.default,{product:e},e.id))})}var n=e.i(88442);function i({productId:e}){let[s,i]=(0,r.useState)([]),[o,d]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{let t=async()=>{try{let t=await fetch(`/api/products/${e}/recommendations?limit=6`);if(t.ok){let e=await t.json();i(e.products||[])}}catch(e){}finally{d(!1)}};e&&t()},[e]),o)?(0,t.jsxs)("div",{className:"py-8 border-t border-gray-200",children:[(0,t.jsx)(n.default,{className:"h-8 w-48 mb-6"}),(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 md:gap-5 lg:gap-6",children:Array.from({length:5}).map((e,r)=>(0,t.jsx)(a.default,{},r))})]}):0===s.length?null:(0,t.jsxs)("div",{className:"py-8 border-t border-gray-200",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Ð¢Ð°Ð½Ð´ Ð·Ó©Ð²Ð»Ó©Ð¶ Ð±Ð°Ð¹Ð½Ð°"}),(0,t.jsx)(l,{products:s})]})}e.s(["default",()=>i],43819)},58790,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(57951);function a({rating:e,onRatingChange:s,readonly:a=!1,size:l="md"}){let[n,i]=(0,r.useState)(0),o={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},d=()=>{a||i(0)},c=n||e;return(0,t.jsx)("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{!a&&s&&s(e)},onMouseEnter:()=>{!a&&i(e)},onMouseLeave:d,disabled:a,className:`${o[l]} ${a?"cursor-default":"cursor-pointer"} transition-colors`,children:(0,t.jsx)("svg",{className:`${o[l]} ${e<=c?"text-yellow-400 fill-yellow-400":"text-gray-300 fill-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},e))})}function l({productId:e,existingReview:l,onSuccess:n,onCancel:i}){let{user:o}=(0,s.useAuth)(),[d,c]=(0,r.useState)(l?.rating||0),[u,x]=(0,r.useState)(l?.review_text||""),[m,h]=(0,r.useState)(!1),[g,p]=(0,r.useState)(null);if(!o)return(0,t.jsx)("div",{className:"p-4 border border-gray-200 rounded-lg text-center text-gray-600",children:"ÐÑÐ²Ñ‚ÑÑ€Ñ‡ Ð¾Ñ€Ð¶ Ð±Ò¯Ñ‚ÑÑÐ³Ð´ÑÑ…Ò¯Ò¯Ð½Ð¸Ð¹Ð³ Ñ…ÑƒÐ´Ð°Ð»Ð´Ð°Ð¶ Ð°Ð²ÑÐ½Ñ‹ Ð´Ð°Ñ€Ð°Ð° Ò¯Ð½ÑÐ»Ð³ÑÑ Ó©Ð³Ó©Ñ… Ð±Ð¾Ð»Ð¾Ð¼Ð¶Ñ‚Ð¾Ð¹"});let f=async t=>{if(t.preventDefault(),0===d)return void p("Ò®Ð½ÑÐ»Ð³ÑÑ ÑÐ¾Ð½Ð³Ð¾Ð½Ð¾ ÑƒÑƒ");h(!0),p(null);try{let t=`/api/products/${e}/reviews`,r=l?"PUT":"POST",s=l?{review_id:l.id,rating:d,review_text:u.trim()||null}:{rating:d,review_text:u.trim()||null},a=await fetch(t,{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok){let e=await a.json();throw Error(e.error||"ÐÐ»Ð´Ð°Ð° Ð³Ð°Ñ€Ð»Ð°Ð°")}n(),l||(c(0),x(""))}catch(e){p(e instanceof Error?e.message:"Ò®Ð½ÑÐ»Ð³ÑÑ Ð½ÑÐ¼ÑÑ…ÑÐ´ Ð°Ð»Ð´Ð°Ð° Ð³Ð°Ñ€Ð»Ð°Ð°")}finally{h(!1)}};return(0,t.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ò®Ð½ÑÐ»Ð³ÑÑ"}),(0,t.jsx)(a,{rating:d,onRatingChange:c,readonly:!1})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"review-text",className:"block text-sm font-medium text-gray-700 mb-2",children:"Ð¡ÑÑ‚Ð³ÑÐ³Ð´ÑÐ» (ÑÐ¾Ð½Ð³Ð¾Ð»Ñ‚Ñ‚Ð¾Ð¹)"}),(0,t.jsx)("textarea",{id:"review-text",value:u,onChange:e=>x(e.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-300 text-sm",placeholder:"Ð‘Ò¯Ñ‚ÑÑÐ³Ð´ÑÑ…Ò¯Ò¯Ð½Ð¸Ð¹ Ñ‚Ð°Ð»Ð°Ð°Ñ€Ñ… ÑÐ°Ð½Ð°Ð» Ð±Ð¾Ð´Ð»Ð¾Ð¾ Ð±Ð¸Ñ‡Ð½Ñ Ò¯Ò¯..."})]}),g&&(0,t.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-600",children:g}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{type:"submit",disabled:m||0===d,className:"px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed text-sm font-medium",children:m?"Ð¥Ð°Ð´Ð³Ð°Ð»Ð¶ Ð±Ð°Ð¹Ð½Ð°...":l?"Ð¨Ð¸Ð½ÑÑ‡Ð»ÑÑ…":"Ð˜Ð»Ð³ÑÑÑ…"}),i&&(0,t.jsx)("button",{type:"button",onClick:i,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm font-medium",children:"Ð¦ÑƒÑ†Ð»Ð°Ñ…"})]})]})}function n({productId:e,averageRating:n,totalReviews:i}){let{user:o}=(0,s.useAuth)(),[d,c]=(0,r.useState)([]),[u,x]=(0,r.useState)(!0),[m,h]=(0,r.useState)(1),[g,p]=(0,r.useState)(1),[f,y]=(0,r.useState)(null),[b,v]=(0,r.useState)(!1),j=async(t=1)=>{x(!0);try{let r=await fetch(`/api/products/${e}/reviews?page=${t}&limit=10`);if(r.ok){let e=await r.json();c(e.reviews||[]),p(e.pagination?.totalPages||1)}}catch(e){}finally{x(!1)}};(0,r.useEffect)(()=>{j(m)},[e,m]);let w=async t=>{if(confirm("Ð­Ð½Ñ Ò¯Ð½ÑÐ»Ð³ÑÑÐ³ ÑƒÑÑ‚Ð³Ð°Ñ…Ð´Ð°Ð° Ð¸Ñ‚Ð³ÑÐ»Ñ‚ÑÐ¹ Ð±Ð°Ð¹Ð½Ð° ÑƒÑƒ?"))try{(await fetch(`/api/products/${e}/reviews?review_id=${t}`,{method:"DELETE"})).ok&&j(m)}catch(e){}},N=o?d.find(e=>e.profiles.id===o.id):void 0;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Ò®Ð½ÑÐ»Ð³ÑÑ Ð±Ð° ÑÑÑ‚Ð³ÑÐ³Ð´ÑÐ»"}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a,{rating:Math.round(n),readonly:!0,size:"lg"}),(0,t.jsx)("span",{className:"text-lg font-medium text-gray-900",children:n.toFixed(1)})]}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:["(",i," Ò¯Ð½ÑÐ»Ð³ÑÑ)"]})]})]}),o&&!N&&(0,t.jsx)("button",{onClick:()=>v(!b),className:"px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 text-sm font-medium",children:b?"Ð¦ÑƒÑ†Ð»Ð°Ñ…":"Ò®Ð½ÑÐ»Ð³ÑÑ Ð½ÑÐ¼ÑÑ…"})]}),b&&o&&!N&&(0,t.jsx)("div",{className:"p-4 border border-gray-200 rounded-lg",children:(0,t.jsx)(l,{productId:e,onSuccess:()=>{v(!1),j(m)},onCancel:()=>v(!1)})}),f&&N&&(0,t.jsx)("div",{className:"p-4 border border-gray-200 rounded-lg",children:(0,t.jsx)(l,{productId:e,existingReview:N,onSuccess:()=>{y(null),j(m)},onCancel:()=>y(null)})}),u?(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Ð£Ð½ÑˆÐ¸Ð¶ Ð±Ð°Ð¹Ð½Ð°..."}):0===d.length?(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Ð¥Ð°Ñ€Ð°Ð°Ñ…Ð°Ð½ Ò¯Ð½ÑÐ»Ð³ÑÑ Ð±Ð°Ð¹Ñ…Ð³Ò¯Ð¹ Ð±Ð°Ð¹Ð½Ð°"}):(0,t.jsx)("div",{className:"space-y-4",children:d.map(e=>{let r;return(0,t.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:e.profiles.avatar_url?(0,t.jsx)("img",{src:e.profiles.avatar_url,alt:e.profiles.full_name||"User",className:"w-10 h-10 rounded-full"}):(0,t.jsx)("span",{className:"text-gray-600 text-sm font-medium",children:(e.profiles.full_name||"U")[0].toUpperCase()})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.profiles.full_name||"Ð¥ÑÑ€ÑÐ³Ð»ÑÐ³Ñ‡"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:(r=new Date(e.created_at),new Intl.DateTimeFormat("mn-MN",{year:"numeric",month:"long",day:"numeric"}).format(r))})]})]}),o?.id===e.profiles.id&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>y(f===e.id?null:e.id),className:"text-sm text-gray-600 hover:text-gray-900",children:"Ð—Ð°ÑÐ°Ñ…"}),(0,t.jsx)("button",{onClick:()=>w(e.id),className:"text-sm text-red-600 hover:text-red-900",children:"Ð£ÑÑ‚Ð³Ð°Ñ…"})]})]}),(0,t.jsx)(a,{rating:e.rating,readonly:!0,size:"sm"}),e.review_text&&(0,t.jsx)("p",{className:"mt-3 text-sm text-gray-700",children:e.review_text})]},e.id)})}),g>1&&(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>h(e=>Math.max(1,e-1)),disabled:1===m,className:"px-3 py-1 border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Ó¨Ð¼Ð½Ó©Ñ…"}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:[m," / ",g]}),(0,t.jsx)("button",{onClick:()=>h(e=>Math.min(g,e+1)),disabled:m===g,className:"px-3 py-1 border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Ð”Ð°Ñ€Ð°Ð°Ñ…"})]})]})}e.s(["default",()=>n],58790)},22733,e=>{"use strict";var t=e.i(43476),r=e.i(18566),s=e.i(29581);function a({product:e}){let a=(0,r.useRouter)(),{addToComparison:l,isInComparison:n,comparisonProducts:i}=(0,s.useComparison)(),o=n(e.id);return(0,t.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,t.jsxs)("button",{onClick:()=>{let t={id:e.id,name_en:e.nameEn,name_mn:e.nameMn,brand:e.brand,price:e.price,original_price:e.originalPrice,discount:e.discount,images:e.images,description:e.description,brand_color:e.brandColor,image_color:e.imageColor};n(e.id)||l(t),a.push("/compare")},className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-white border-2 border-gray-300 rounded-lg text-gray-900 font-medium hover:border-gray-900 hover:bg-gray-50 transition",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),o?"View Comparison":"Compare with Other Products"]}),i.length>0&&(0,t.jsxs)("p",{className:"text-xs text-center text-gray-500 mt-2",children:[i.length," product",i.length>1?"s":""," in comparison"]})]})}e.s(["default",()=>a])}]);