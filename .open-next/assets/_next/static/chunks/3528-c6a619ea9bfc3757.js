(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3528],{63:(e,t,r)=>{"use strict";var s=r(7260);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},2503:(e,t,r)=>{"use strict";r.d(t,{CartProvider:()=>h,_:()=>m});var s=r(5155),n=r(2115),i=r(5380);async function o(e){try{for(let t of e)await l(t.id,t.quantity,t.size)}catch(e){}}async function a(){try{let e=await fetch("/api/cart");if(!e.ok)return[];return(await e.json()).items||[]}catch(e){return[]}}async function l(e,t,r){try{return(await fetch("/api/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_id:e,quantity:t,size:r||null})})).ok}catch(e){return!1}}async function c(e,t,r){try{return(await fetch("/api/cart",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_id:e,quantity:t,size:r||null})})).ok}catch(e){return!1}}async function d(e,t){try{let r=new URL("/api/cart",window.location.origin);return r.searchParams.set("product_id",e),t&&r.searchParams.set("size",t.toString()),(await fetch(r.toString(),{method:"DELETE"})).ok}catch(e){return!1}}let u=(0,n.createContext)(void 0);function h(e){let{children:t}=e,{user:r}=(0,i.A)(),[h,m]=(0,n.useState)([]),[f,p]=(0,n.useState)(!1),x=(0,n.useRef)(null),g=(0,n.useRef)(!0),y=r?"cart:".concat(r.id):null;(0,n.useEffect)(()=>{if(!r||!y)return void m([]);(async()=>{p(!0);try{let e=await a(),t=localStorage.getItem(y),r=t?JSON.parse(t):[],s=[...e];r.forEach(e=>{s.find(t=>t.id===e.id&&t.size===e.size)||s.push(e)}),m(s),localStorage.setItem(y,JSON.stringify(s)),r.length>0&&e.length!==s.length&&await o(s)}catch(t){let e=localStorage.getItem(y);m(e?JSON.parse(e):[])}finally{p(!1),g.current=!1}})()},[r,y]),(0,n.useEffect)(()=>{y&&!g.current&&localStorage.setItem(y,JSON.stringify(h))},[h,y]),(0,n.useEffect)(()=>{if(r&&y&&!g.current)return x.current&&clearTimeout(x.current),x.current=setTimeout(async()=>{p(!0);try{for(let e of h)await l(e.id,e.quantity,e.size)}catch(e){}finally{p(!1)}},1e3),()=>{x.current&&clearTimeout(x.current)}},[h,r,y]);let v=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!r)return{ok:!1};try{let r=await fetch("/api/products/".concat(e.id,"/stock"));if(r.ok){var s;let n=await r.json(),i=((null==(s=h.find(t=>t.id===e.id&&t.size===e.size))?void 0:s.quantity)||0)+t;if(n.stock<i)return{ok:!1,error:0===n.stock?"Бэлэн бараа байхгүй":"Зөвхөн ".concat(n.stock," ширхэг үлдсэн")}}}catch(e){}m(r=>r.find(t=>t.id===e.id&&t.size===e.size)?r.map(r=>r.id===e.id&&r.size===e.size?{...r,quantity:r.quantity+t}:r):[...r,{...e,quantity:t}]);try{await l(e.id,t,e.size)}catch(e){}return{ok:!0}},b=async(e,t)=>{let r=Math.max(1,t),s=h.find(t=>t.id===e);try{let t=await fetch("/api/products/".concat(e,"/stock"));if(t.ok){let n=await t.json();if(n.stock<r){let t=Math.min(n.stock,r);m(r=>r.map(r=>r.id===e?{...r,quantity:t}:r)),s&&await c(e,t,s.size);return}}}catch(e){}if(m(t=>t.map(t=>t.id===e?{...t,quantity:r}:t)),s)try{await c(e,r,s.size)}catch(e){}},w=async e=>{let t=h.find(t=>t.id===e);if(m(t=>t.filter(t=>t.id!==e)),t)try{await d(e,t.size)}catch(e){}},j=async()=>{if(r)try{for(let e of h)await d(e.id,e.size)}catch(e){}m([])},_=(0,n.useMemo)(()=>h.reduce((e,t)=>e+t.price*t.quantity,0),[h]),S=(0,n.useMemo)(()=>h.reduce((e,t)=>e+t.quantity,0),[h]);return(0,s.jsx)(u.Provider,{value:{items:h,subtotal:_,totalItems:S,addItem:v,updateQuantity:b,removeItem:w,clearCart:j,syncing:f},children:t})}function m(){let e=(0,n.useContext)(u);if(!e)throw Error("useCart must be used within a CartProvider");return e}},4001:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var s=r(5155),n=r(2115),i=r(2619),o=r.n(i),a=r(63),l=r(5380);function c(){var e,t,r,i;let[c,d]=(0,n.useState)(!1),u=(0,n.useRef)(null),{user:h,profile:m,signOut:f,isAdmin:p}=(0,l.A)(),x=(0,a.useRouter)();(0,n.useEffect)(()=>{function e(e){u.current&&!u.current.contains(e.target)&&d(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let g=async()=>{try{await f(),d(!1),x.push("/")}catch(e){}};return h?(0,s.jsxs)("div",{className:"relative",ref:u,children:[(0,s.jsxs)("button",{onClick:()=>d(!c),className:"flex items-center space-x-2 text-gray-700 hover:text-gray-900",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-900 flex items-center justify-center text-white font-medium text-sm",children:(null==m||null==(t=m.full_name)||null==(e=t[0])?void 0:e.toUpperCase())||"U"}),(0,s.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(c?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),c&&(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[(0,s.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:(null==m?void 0:m.full_name)||"Хэрэглэгч"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:(null==(r=h.user_metadata)?void 0:r.phone_number)||h.phone||(null==(i=h.email)?void 0:i.replace("@phone.app",""))}),p&&(0,s.jsx)("span",{className:"inline-block mt-2 px-2 py-1 text-xs font-medium bg-gray-900 text-white rounded",children:"Админ"})]}),(0,s.jsxs)("div",{className:"py-2",children:[(0,s.jsx)(o(),{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>d(!1),children:"\uD83D\uDC64 Миний профайл"}),(0,s.jsx)(o(),{href:"/profile?tab=orders",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>d(!1),children:"\uD83D\uDCE6 Миний захиалга"}),(0,s.jsx)(o(),{href:"/profile?tab=wishlist",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>d(!1),children:"❤️ Хадгалсан"}),p&&(0,s.jsx)(o(),{href:"/admin",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>d(!1),children:"Админ самбар"})]}),(0,s.jsx)("div",{className:"border-t border-gray-200 pt-2",children:(0,s.jsx)("button",{onClick:g,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:"Гарах"})})]})]}):(0,s.jsx)(o(),{href:"/auth/login",className:"text-gray-700 hover:text-gray-900 text-sm md:text-base whitespace-nowrap font-medium",children:"нэвтрэх/бүртгүүлэх"})}},4269:(e,t,r)=>{"use strict";function s(e,t){let r=e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");if(t){let e=t.replace(/[^a-z0-9]+/gi,"-").toLowerCase();return"".concat(r,"-").concat(e)}return r}function n(e){return new Intl.NumberFormat("mn-MN").format(e)}r.d(t,{$:()=>n,z:()=>s})},5380:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,AuthProvider:()=>a});var s=r(5155),n=r(2115),i=r(6648);let o=(0,n.createContext)(void 0);function a(e){let{children:t}=e,[r,a]=(0,n.useState)(null),[l,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(!0),h=(0,i.U)();(0,n.useEffect)(()=>{h.auth.getSession().then(e=>{var t;let{data:{session:r}}=e;a(null!=(t=null==r?void 0:r.user)?t:null),(null==r?void 0:r.user)?m(r.user.id):u(!1)});let{data:{subscription:e}}=h.auth.onAuthStateChange((e,t)=>{var r;a(null!=(r=null==t?void 0:t.user)?r:null),(null==t?void 0:t.user)?m(t.user.id):(c(null),u(!1))});return()=>e.unsubscribe()},[]);let m=async e=>{try{let{data:t,error:r}=await h.from("profiles").select("*").eq("id",e).single();if(r)throw r;c(t)}catch(e){}finally{u(!1)}},f=async(e,t,r,s)=>{let n=t.replace(/[^0-9]/g,""),{data:i,error:o}=await h.auth.signUp({email:e,password:r,options:{data:{full_name:s||"",phone_number:n},emailRedirectTo:void 0}});if(o){if(o.message.includes("Signups not allowed"))throw Error('Бүртгэл идэвхгүй байна. Суpabase dashboard-аас "Enable email signups" асаах шаардлагатай. Authentication → Providers → Email → Enable email signups');throw o}i.user&&(a(i.user),await m(i.user.id))},p=async(e,t)=>{let r;if(e.includes("@"))r=e.trim();else{let t=e.replace(/[^0-9]/g,"");if(!t||t.length<8)throw Error("Утасны дугаар буруу байна");let{data:s,error:n}=await h.from("profiles").select("email").eq("phone_number",t).single();if(n)throw Error("Утасны дугаараар бүртгэл олдсонгүй. И-мэйл ашиглана уу.");if(!(null==s?void 0:s.email))throw Error("Бүртгэлийн мэдээлэл дутуу байна. Та дахин бүртгүүлнэ үү.");r=s.email}let{data:s,error:n}=await h.auth.signInWithPassword({email:r,password:t});if(n)throw n},x=async()=>{let{data:e,error:t}=await h.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(t)throw t},g=async()=>{let{error:e}=await h.auth.signOut();if(e)throw e},y=(null==l?void 0:l.role)==="admin";return(0,s.jsx)(o.Provider,{value:{user:r,profile:l,loading:d,signUp:f,signIn:p,signInWithGoogle:x,signOut:g,isAdmin:y},children:t})}function l(){let e=(0,n.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5464:(e,t,r)=>{"use strict";r.d(t,{default:()=>g});var s=r(5155),n=r(2115),i=r(4269),o=r(63),a=r(5380),l=r(2503),c=r(6905),d=r(8661),u=r.n(d);function h(e){let{trigger:t,onComplete:r}=e,[i,o]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{if(t){o(!0);let e=setTimeout(()=>{o(!1),null==r||r()},600);return()=>clearTimeout(e)}},[t,r]),i)?(0,s.jsxs)("div",{className:"jsx-4c470673f45c13f fixed inset-0 pointer-events-none z-50",children:[(0,s.jsx)("div",{className:"jsx-4c470673f45c13f absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:(0,s.jsxs)("div",{className:"jsx-4c470673f45c13f animate-bounce-in bg-green-500 text-white px-6 py-3 rounded-full shadow-lg flex items-center gap-2",children:[(0,s.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-4c470673f45c13f w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7",className:"jsx-4c470673f45c13f"})}),(0,s.jsx)("span",{className:"jsx-4c470673f45c13f font-medium",children:"Сагсанд нэмэгдлээ!"})]})}),(0,s.jsx)(u(),{id:"4c470673f45c13f",children:"@keyframes bounce-in{0%{transform:translate(-50%,-50%)scale(0);opacity:0}50%{transform:translate(-50%,-50%)scale(1.1);opacity:1}100%{transform:translate(-50%,-50%)scale(1);opacity:0}}.animate-bounce-in.jsx-4c470673f45c13f{animation:bounce-in.6s ease-out}"})]}):null}function m(e){let{product:t,slug:r}=e,{user:i}=(0,a.A)(),{addItem:d,items:u}=(0,l._)(),{showToast:m}=(0,c.d)(),f=(0,o.useRouter)(),p=(0,o.usePathname)(),[x,g]=(0,n.useState)(null),[y,v]=(0,n.useState)(!1),[b,w]=(0,n.useState)(null),[j,_]=(0,n.useState)(!1),S=async()=>{if(t.id)try{let e=await fetch("/api/products/".concat(t.id,"/stock"));if(e.ok){let t=await e.json();g(t.stock)}}catch(e){}};(0,n.useEffect)(()=>{t.id&&S()},[t.id]);let k=async()=>{if(!i)return void f.push("/auth/login?redirect=".concat(encodeURIComponent(p)));if(t.id){v(!0),w(null);try{var e;let s=await fetch("/api/products/".concat(t.id,"/stock"));if(!s.ok)throw Error("Бүтээгдэхүүн олдсонгүй");let n=await s.json(),i=(null==(e=u.find(e=>e.id===t.id))?void 0:e.quantity)||0;if(n.stock<i+1){w(0===n.stock?"Бэлэн бараа байхгүй":"Зөвхөн ".concat(n.stock," ширхэг үлдсэн")),v(!1);return}if(!t.id){w("Бүтээгдэхүүний ID олдсонгүй"),v(!1);return}let o=await d({id:String(t.id),name:t.nameEn||t.nameMn||"",price:t.price||0,originalPrice:t.originalPrice||t.price||0,quantity:1,slug:r,brand:t.brand,imageColor:t.imageColor,brandColor:t.brandColor,images:t.images});o.ok?(await S(),_(!0),m("".concat(t.nameEn||t.nameMn||"Бүтээгдэхүүн"," сагсанд нэмэгдлээ"),"success")):(w(o.error||"Сагслахад алдаа гарлаа"),m(o.error||"Сагслахад алдаа гарлаа","error"))}catch(e){w(e instanceof Error?e.message:"Алдаа гарлаа")}finally{v(!1)}}},N=null!==x&&0===x;return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("button",{onClick:k,disabled:N||y,className:"w-full rounded-full border px-3 py-2 text-xs transition-colors ".concat(N?"border-gray-200 text-gray-400 cursor-not-allowed bg-gray-50":"border-gray-200 text-gray-700 hover:border-gray-300 hover:text-gray-900"," ").concat(y?"opacity-50 cursor-not-allowed":""),children:y?"Түр хүлээнэ үү...":N?"Бэлэн бараа байхгүй":"Сагслах"}),b&&(0,s.jsx)("p",{className:"mt-1 text-xs text-red-600 text-center",children:b}),null!==x&&x>0&&x<5&&!b&&(0,s.jsxs)("p",{className:"mt-1 text-xs text-orange-600 text-center",children:["Зөвхөн ",x," ширхэг үлдсэн"]}),(0,s.jsx)(h,{trigger:j,onComplete:()=>_(!1)})]})}var f=r(6648);function p(e){let{productId:t,className:r=""}=e,{user:i}=(0,a.A)(),{showToast:o}=(0,c.d)(),[l,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)(!1),m=(0,f.U)();(0,n.useEffect)(()=>{i&&t&&p()},[i,t]);let p=async()=>{if(i)try{let{data:e}=await m.from("wishlist").select("id").eq("user_id",i.id).eq("product_id",t).single();d(!!e)}catch(e){d(!1)}},x=async e=>{if(e.preventDefault(),e.stopPropagation(),!i)return void o("Эхлээд нэвтэрнэ үү","info");h(!0);try{if(l){let{error:e}=await m.from("wishlist").delete().eq("user_id",i.id).eq("product_id",t);if(e)throw e;d(!1),o("Хадгалсан бүтээгдэхүүнээс хасав","success")}else{let{error:e}=await m.from("wishlist").insert({user_id:i.id,product_id:t});if(e)throw e;d(!0),o("Хадгалсан бүтээгдэхүүнд нэмэгдлээ","success")}}catch(e){o("Алдаа гарлаа","error")}finally{h(!1)}};return(0,s.jsx)("button",{onClick:x,disabled:u,className:"".concat(r," transition-colors ").concat(l?"text-red-500 hover:text-red-600":"text-gray-400 hover:text-red-500"," ").concat(u?"opacity-50 cursor-not-allowed":""),"aria-label":l?"Хадгалсан бүтээгдэхүүнээс хасах":"Хадгалсан бүтээгдэхүүнд нэмэх",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:l?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})}function x(e){let{product:t,isOpen:r,onClose:a}=e,l=(0,o.useRouter)(),[c,d]=(0,n.useState)(null),u=t.id?(0,i.z)("".concat(t.brand," ").concat(t.nameEn),t.id):"";if((0,n.useEffect)(()=>{t.id&&fetch("/api/products/".concat(t.id,"/stock")).then(e=>e.json()).then(e=>d(e.stock)).catch(()=>{})},[t.id]),(0,n.useEffect)(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),!r)return null;let h=e=>new Intl.NumberFormat("mn-MN").format(e);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:a}),(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Бүтээгдэхүүний мэдээлэл"}),(0,s.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsx)("div",{children:t.images&&t.images.length>0&&t.images[0]?(0,s.jsx)("img",{src:t.images[0],alt:t.nameEn||t.nameMn||"",className:"w-full aspect-square rounded border border-gray-200 object-cover"}):(0,s.jsx)("div",{className:"w-full aspect-square rounded border border-gray-200 bg-gray-50",style:{backgroundColor:t.imageColor}})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-4 flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-2xl font-semibold text-gray-900 mb-2",children:t.nameEn}),(0,s.jsx)("p",{className:"text-gray-600 mb-2",children:t.nameMn}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:t.brand})]}),t.id&&(0,s.jsx)(p,{productId:String(t.id)})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsxs)("span",{className:"text-3xl font-bold text-gray-900",children:[h(t.price)," ₮"]}),(0,s.jsxs)("span",{className:"text-lg text-gray-400 line-through",children:[h(t.originalPrice)," ₮"]}),t.discount&&(0,s.jsxs)("span",{className:"text-sm bg-red-100 text-red-700 px-2 py-1 rounded",children:["-",t.discount,"%"]})]}),null!==c&&c>0&&c<5&&(0,s.jsxs)("p",{className:"text-sm text-orange-600",children:["Зөвхөн ",c," ширхэг үлдсэн"]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(m,{product:t,slug:u}),(0,s.jsx)("button",{onClick:()=>{l.push("/products/".concat(u)),a()},className:"w-full rounded-full border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Дэлгэрэнгүй үзэх"})]})]})]})})]})})]})}function g(e){let{product:t}=e,[r,o]=(0,n.useState)(null),[a,l]=(0,n.useState)(!1),c=e=>new Intl.NumberFormat("mn-MN").format(e),d=t.id?(0,i.z)("".concat(t.brand," ").concat(t.nameEn),t.id):"",u=e=>{e.preventDefault(),l(!0)};(0,n.useEffect)(()=>{t.id&&fetch("/api/products/".concat(t.id,"/stock")).then(e=>e.ok?e.json():{stock:null}).then(e=>{e&&"number"==typeof e.stock&&o(e.stock)}).catch(()=>{})},[t.id]);let h=null!==r&&0===r;return(0,s.jsxs)("div",{className:"group border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow bg-white flex flex-col h-full relative ".concat(h?"opacity-75":""),children:[t.id&&(0,s.jsx)("div",{className:"absolute top-4 right-4 z-10",children:(0,s.jsx)(p,{productId:String(t.id)})}),(0,s.jsxs)("a",{href:"/products/".concat(d),className:"flex flex-col flex-1",children:[(0,s.jsxs)("div",{className:"mb-3 relative",children:[(0,s.jsx)("div",{className:"w-16 h-8 rounded border border-gray-200 bg-gray-50",style:{backgroundColor:t.brandColor}}),h&&(0,s.jsx)("span",{className:"absolute top-0 right-0 px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:"Бэлэн бараа байхгүй"}),null!==r&&r>0&&r<5&&!h&&(0,s.jsxs)("span",{className:"absolute top-0 right-0 px-2 py-0.5 bg-orange-100 text-orange-700 text-xs font-medium rounded",children:[r," ширхэг үлдсэн"]})]}),(0,s.jsx)("div",{className:"mb-4 relative group/image",children:t.images&&t.images.length>0&&t.images[0]?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:t.images[0],alt:t.nameEn||t.nameMn||"",className:"w-full aspect-square rounded border border-gray-200 object-cover cursor-pointer",onClick:u}),(0,s.jsx)("button",{onClick:u,className:"absolute inset-0 bg-black bg-opacity-0 group-hover/image:bg-opacity-10 transition-opacity flex items-center justify-center opacity-0 group-hover/image:opacity-100",children:(0,s.jsx)("span",{className:"bg-white px-4 py-2 rounded-lg text-sm font-medium text-gray-900 shadow-lg",children:"Хурдан үзэх"})})]}):(0,s.jsx)("div",{className:"w-full aspect-square rounded border border-gray-200 bg-gray-50 cursor-pointer",style:{backgroundColor:t.imageColor},onClick:u})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-sm md:text-base font-medium text-gray-900 mb-2 line-clamp-2 leading-snug min-h-[2.5rem]",children:t.nameEn}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-3 line-clamp-1 min-h-[1.25rem]",children:t.nameMn}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,s.jsxs)("span",{className:"text-base md:text-lg font-semibold text-gray-900",children:[c(t.price)," ₮"]}),(0,s.jsxs)("span",{className:"text-sm text-gray-400 line-through",children:[c(t.originalPrice)," ₮"]}),t.discount&&(0,s.jsxs)("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded border border-gray-200",children:["-",t.discount,"%"]})]})]})]}),(0,s.jsx)("div",{className:"pt-3 mt-auto",children:(0,s.jsx)(m,{product:t,slug:d})}),(0,s.jsx)(x,{product:t,isOpen:a,onClose:()=>l(!1)})]})}},5688:(e,t,r)=>{"use strict";var s=r(5704);r(6340);var n=r(2115),i=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(n),o=void 0!==s&&s.env&&!0,a=function(e){return"[object String]"===Object.prototype.toString.call(e)},l=function(){function e(e){var t=void 0===e?{}:e,r=t.name,s=void 0===r?"stylesheet":r,n=t.optimizeForSpeed,i=void 0===n?o:n;c(a(s),"`name` must be a string"),this._name=s,this._deletedRulePlaceholder="#"+s+"-deleted-rule____{}",c("boolean"==typeof i,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=i,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var l="undefined"!=typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=l?l.getAttribute("content"):null}var t,r=e.prototype;return r.setOptimizeForSpeed=function(e){c("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),c(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},r.isOptimizeForSpeed=function(){return this._optimizeForSpeed},r.inject=function(){var e=this;if(c(!this._injected,"sheet already injected"),this._injected=!0,"undefined"!=typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(o||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,r){return"number"==typeof r?e._serverSheet.cssRules[r]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),r},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},r.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},r.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},r.insertRule=function(e,t){if(c(a(e),"`insertRule` accepts only strings"),"undefined"==typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var r=this.getSheet();"number"!=typeof t&&(t=r.cssRules.length);try{r.insertRule(e,t)}catch(t){return o||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var s=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,s))}return this._rulesCount++},r.replaceRule=function(e,t){if(this._optimizeForSpeed||"undefined"==typeof window){var r="undefined"!=typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!r.cssRules[e])return e;r.deleteRule(e);try{r.insertRule(t,e)}catch(s){o||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),r.insertRule(this._deletedRulePlaceholder,e)}}else{var s=this._tags[e];c(s,"old rule at index `"+e+"` not found"),s.textContent=t}return e},r.deleteRule=function(e){if("undefined"==typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];c(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},r.flush=function(){this._injected=!1,this._rulesCount=0,"undefined"!=typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},r.cssRules=function(){var e=this;return"undefined"==typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,r){return r?t=t.concat(Array.prototype.map.call(e.getSheetForTag(r).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},r.makeStyleTag=function(e,t,r){t&&c(a(t),"makeStyleTag accepts only strings as second parameter");var s=document.createElement("style");this._nonce&&s.setAttribute("nonce",this._nonce),s.type="text/css",s.setAttribute("data-"+e,""),t&&s.appendChild(document.createTextNode(t));var n=document.head||document.getElementsByTagName("head")[0];return r?n.insertBefore(s,r):n.appendChild(s),s},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(e.prototype,t),e}();function c(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var d=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0},u={};function h(e,t){if(!t)return"jsx-"+e;var r=String(t),s=e+r;return u[s]||(u[s]="jsx-"+d(e+"-"+r)),u[s]}function m(e,t){"undefined"==typeof window&&(t=t.replace(/\/style/gi,"\\/style"));var r=e+t;return u[r]||(u[r]=t.replace(/__jsx-style-dynamic-selector/g,e)),u[r]}var f=function(){function e(e){var t=void 0===e?{}:e,r=t.styleSheet,s=void 0===r?null:r,n=t.optimizeForSpeed,i=void 0!==n&&n;this._sheet=s||new l({name:"styled-jsx",optimizeForSpeed:i}),this._sheet.inject(),s&&"boolean"==typeof i&&(this._sheet.setOptimizeForSpeed(i),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"undefined"==typeof window||this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var r=this.getIdAndRules(e),s=r.styleId,n=r.rules;if(s in this._instancesCounts){this._instancesCounts[s]+=1;return}var i=n.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[s]=i,this._instancesCounts[s]=1},t.remove=function(e){var t=this,r=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(r in this._instancesCounts,"styleId: `"+r+"` not found"),this._instancesCounts[r]-=1,this._instancesCounts[r]<1){var s=this._fromServer&&this._fromServer[r];s?(s.parentNode.removeChild(s),delete this._fromServer[r]):(this._indices[r].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[r]),delete this._instancesCounts[r]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],r=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return r[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,r;return t=this.cssRules(),void 0===(r=e)&&(r={}),t.map(function(e){var t=e[0],s=e[1];return i.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:r.nonce?r.nonce:void 0,dangerouslySetInnerHTML:{__html:s}})})},t.getIdAndRules=function(e){var t=e.children,r=e.dynamic,s=e.id;if(r){var n=h(s,r);return{styleId:n,rules:Array.isArray(t)?t.map(function(e){return m(n,e)}):[m(n,t)]}}return{styleId:h(s),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),p=n.createContext(null);p.displayName="StyleSheetContext";var x=i.default.useInsertionEffect||i.default.useLayoutEffect,g="undefined"!=typeof window?new f:void 0;function y(e){var t=g||n.useContext(p);return t&&("undefined"==typeof window?t.add(e):x(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}y.dynamic=function(e){return e.map(function(e){return h(e[0],e[1])}).join(" ")},t.style=y},6340:()=>{},6648:(e,t,r)=>{"use strict";r.d(t,{U:()=>n});var s=r(5417);function n(){return(0,s.createBrowserClient)("https://ejdwrepyuznanwujidai.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVqZHdyZXB5dXpuYW53dWppZGFpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzNjk3NTYsImV4cCI6MjA4Mzk0NTc1Nn0.MRJe6csColzMRDpAWa-Ma99noAk6n8SbnXXHP2rNAJ4")}},6905:(e,t,r)=>{"use strict";r.d(t,{ToastProvider:()=>c,d:()=>d});var s=r(5155),n=r(8661),i=r.n(n),o=r(2115);function a(e){let{toast:t,onClose:r}=e;(0,o.useEffect)(()=>{let e=setTimeout(()=>{r(t.id)},t.duration||3e3);return()=>clearTimeout(e)},[t.id,t.duration,r]);let n="success"===t.type?"bg-green-50 border-green-200 text-green-800":"error"===t.type?"bg-red-50 border-red-200 text-red-800":"bg-blue-50 border-blue-200 text-blue-800",i="success"===t.type?"text-green-400":"error"===t.type?"text-red-400":"text-blue-400";return(0,s.jsxs)("div",{className:"".concat(n," border rounded-lg shadow-lg p-4 mb-3 flex items-center gap-3 min-w-[300px] max-w-md animate-slide-in"),children:["success"===t.type&&(0,s.jsx)("svg",{className:"w-5 h-5 ".concat(i," flex-shrink-0"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"error"===t.type&&(0,s.jsx)("svg",{className:"w-5 h-5 ".concat(i," flex-shrink-0"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"info"===t.type&&(0,s.jsx)("svg",{className:"w-5 h-5 ".concat(i," flex-shrink-0"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("p",{className:"flex-1 text-sm font-medium",children:t.message}),(0,s.jsx)("button",{onClick:()=>r(t.id),className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}let l=(0,o.createContext)(void 0);function c(e){let{children:t}=e,[r,n]=(0,o.useState)([]),c=(0,o.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,s=Math.random().toString(36).substring(7);n(n=>[...n,{id:s,message:e,type:t,duration:r}])},[]),d=(0,o.useCallback)(e=>{n(t=>t.filter(t=>t.id!==e))},[]);return(0,s.jsxs)(l.Provider,{value:{showToast:c},children:[t,(0,s.jsx)("div",{className:"jsx-b8ef3436bcf78b76 fixed top-4 right-4 z-50 flex flex-col items-end",children:r.map(e=>(0,s.jsx)(a,{toast:e,onClose:d},e.id))}),(0,s.jsx)(i(),{id:"b8ef3436bcf78b76",children:"@keyframes slide-in{from{transform:translatex(100%);opacity:0}to{transform:translatex(0);opacity:1}}.animate-slide-in{animation:slide-in.3s ease-out}"})]})}function d(){let e=(0,o.useContext)(l);if(!e)throw Error("useToast must be used within ToastProvider");return e}},8661:(e,t,r)=>{"use strict";e.exports=r(5688).style}}]);