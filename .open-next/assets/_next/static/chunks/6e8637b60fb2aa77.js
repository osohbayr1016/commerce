(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,14622,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(22016),a=e.i(18566),i=e.i(11795),l=e.i(43066);function n({productId:e}){let[r,n]=(0,s.useState)(!1),d=(0,i.createClient)(),o=(0,a.useRouter)(),c=(0,l.useModal)(),x=async()=>{c.showConfirm("Бүтээгдэхүүн устгах","Та энэ бүтээгдэхүүнийг устгахдаа итгэлтэй байна уу?",async()=>{n(!0);try{let{error:t}=await d.from("products").delete().eq("id",e);if(t)throw t;c.showSuccess("Амжилттай","Бүтээгдэхүүн амжилттай устгагдлаа"),o.push("/admin/products"),o.refresh()}catch(e){c.showError("Алдаа","Бүтээгдэхүүн устгахад алдаа гарлаа")}finally{n(!1)}},"Устгах","Болих")};return(0,t.jsx)("button",{onClick:x,disabled:r,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Устгаж байна...":"Устгах"})}function d({selectedCount:e,onClearSelection:s,onBulkDelete:r,onBulkPriceUpdate:a,onBulkStockUpdate:i}){let n=(0,l.useModal)();return 0===e?null:(0,t.jsx)("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 z-50",children:(0,t.jsxs)("div",{className:"bg-gray-900 text-white px-6 py-4 rounded-lg shadow-2xl flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsxs)("span",{className:"font-medium",children:[e," сонгогдсон"]})]}),(0,t.jsx)("div",{className:"h-6 w-px bg-gray-700"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:a,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md text-sm font-medium transition",children:"Үнэ өөрчлөх"}),(0,t.jsx)("button",{onClick:i,className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-md text-sm font-medium transition",children:"Нөөц өөрчлөх"}),(0,t.jsx)("button",{onClick:()=>{n.showConfirm("Олноор устгах",`Та ${e} бүтээгдэхүүнийг устгахдаа итгэлтэй байна уу? Энэ үйлдлийг буцаах боломжгүй.`,r,"Устгах","Цуцлах")},className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-md text-sm font-medium transition",children:"Устгах"}),(0,t.jsx)("button",{onClick:s,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-md text-sm font-medium transition",children:"Цуцлах"})]})]})})}function o({isOpen:e,onClose:r,type:a,selectedCount:i,onSubmit:n}){let[d,o]=(0,s.useState)(""),[c,x]=(0,s.useState)("set"),[m,u]=(0,s.useState)(!1),h=(0,l.useModal)();if(!e)return null;let p=async e=>{e.preventDefault();let t=parseFloat(d);if(isNaN(t))return void h.showError("Алдаа","Зөв утга оруулна уу");if("price"===a&&t<0)return void h.showError("Алдаа","Үнэ 0-с бага байж болохгүй");if("stock"===a&&t<0)return void h.showError("Алдаа","Нөөц 0-с бага байж болохгүй");u(!0);try{await n(t,c),o(""),x("set"),r()}catch(e){}finally{u(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,t.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,t.jsx)("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:r}),(0,t.jsx)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:(0,t.jsxs)("form",{onSubmit:p,children:[(0,t.jsxs)("div",{className:"bg-white px-6 pt-6 pb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"price"===a?"Үнэ өөрчлөх":"Нөөц өөрчлөх"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mb-6",children:[i," бүтээгдэхүүнд хамаарна"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Үйлдэл"}),(0,t.jsxs)("select",{value:c,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:"set",children:"Тогтоох"}),"price"===a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("option",{value:"increase",children:"Нэмэгдүүлэх"}),(0,t.jsx)("option",{value:"decrease",children:"Бууруулах"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"set"===c?"Шинэ утга":"Өөрчлөлт"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"number",value:d,onChange:e=>o(e.target.value),placeholder:"price"===a?"89000":"100",required:!0,min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,t.jsx)("span",{className:"absolute right-4 top-2.5 text-gray-500",children:"price"===a?"₮":"ширхэг"})]}),"set"!==c&&(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Жишээ: +10000 эсвэл -5000"})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex justify-end gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:r,disabled:m,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 disabled:opacity-50",children:"Цуцлах"}),(0,t.jsx)("button",{type:"submit",disabled:m,className:"px-6 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Боловсруулж байна...":"Хадгалах"})]})]})})]})})}function c({products:e}){let[i,c]=(0,s.useState)(new Set),[x,m]=(0,s.useState)(!1),[u,h]=(0,s.useState)("price"),p=(0,a.useRouter)(),g=(0,l.useModal)(),y=async()=>{try{let e=await fetch("/api/admin/products/bulk",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({productIds:Array.from(i)})}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to delete products");g.showSuccess("Амжилттай",`${t.count} бүтээгдэхүүн устгагдлаа`),c(new Set),p.refresh()}catch(e){g.showError("Алдаа",e instanceof Error?e.message:"Устгахад алдаа гарлаа")}},b=async(e,t)=>{try{let s="",r=e;"price"===u?"increase"===t?(s="adjustPrice",r=e):"decrease"===t?(s="adjustPrice",r=-e):s="updatePrice":s="updateStock";let a=await fetch("/api/admin/products/bulk",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({productIds:Array.from(i),action:s,value:r})}),l=await a.json();if(!a.ok)throw Error(l.error||"Failed to update products");g.showSuccess("Амжилттай",`${l.count} бүтээгдэхүүн шинэчлэгдлээ`),c(new Set),p.refresh()}catch(e){g.showError("Алдаа",e instanceof Error?e.message:"Шинэчлэхэд алдаа гарлаа")}},f=i.size===e.length&&e.length>0,j=i.size>0&&i.size<e.length;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-4 text-left",children:(0,t.jsx)("input",{type:"checkbox",checked:f,ref:e=>{e&&(e.indeterminate=j)},onChange:()=>{i.size===e.length?c(new Set):c(new Set(e.map(e=>e.id)))},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"})}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"Нэр"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"Брэнд"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"Үнэ"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"Хөнгөлөлт"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"Нөөц"}),(0,t.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-900",children:"Үйлдэл"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-200",children:e.map(e=>(0,t.jsxs)("tr",{className:`hover:bg-gray-50 ${i.has(e.id)?"bg-blue-50":""}`,children:[(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("input",{type:"checkbox",checked:i.has(e.id),onChange:()=>{var t;let s;return t=e.id,void((s=new Set(i)).has(t)?s.delete(t):s.add(t),c(s))},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"})}),(0,t.jsxs)("td",{className:"px-6 py-4",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name_en||e.title}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.name_mn})]}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.brand||"-"}),(0,t.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900",children:[e.price?.toLocaleString()," ₮"]}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.discount?`-${e.discount}%`:"-"}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.stock}),(0,t.jsxs)("td",{className:"px-6 py-4 text-right text-sm space-x-2",children:[(0,t.jsx)(r.default,{href:`/admin/products/${e.id}/edit`,className:"inline-block px-3 py-1 text-gray-700 hover:text-gray-900 font-medium",children:"Засах"}),(0,t.jsx)(n,{productId:e.id})]})]},e.id))})]})}),(0,t.jsx)(d,{selectedCount:i.size,onClearSelection:()=>c(new Set),onBulkDelete:y,onBulkPriceUpdate:()=>{h("price"),m(!0)},onBulkStockUpdate:()=>{h("stock"),m(!0)}}),(0,t.jsx)(o,{isOpen:x,onClose:()=>m(!1),type:u,selectedCount:i.size,onSubmit:b})]})}e.s(["default",()=>c],14622)},94775,e=>{"use strict";var t=e.i(43476),s=e.i(18566);function r({currentPage:e,totalPages:r,basePath:a}){let i=(0,s.useRouter)(),l=e=>{i.push(`${a}?page=${e}`)};return r<=1?null:(0,t.jsxs)("div",{className:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6 mt-4",children:[(0,t.jsxs)("div",{className:"flex flex-1 justify-between sm:hidden",children:[(0,t.jsx)("button",{onClick:()=>l(e-1),disabled:1===e,className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),(0,t.jsx)("button",{onClick:()=>l(e+1),disabled:e===r,className:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),(0,t.jsxs)("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("p",{className:"text-sm text-gray-700",children:["Page ",(0,t.jsx)("span",{className:"font-medium",children:e})," of"," ",(0,t.jsx)("span",{className:"font-medium",children:r})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[(0,t.jsxs)("button",{onClick:()=>l(e-1),disabled:1===e,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 disabled:opacity-50",children:[(0,t.jsx)("span",{className:"sr-only",children:"Previous"}),(0,t.jsx)("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"})})]}),Array.from({length:Math.min(5,r)},(s,r)=>{let a=r+1;return(0,t.jsx)("button",{onClick:()=>l(a),className:`relative inline-flex items-center px-4 py-2 text-sm font-semibold ${a===e?"z-10 bg-gray-900 text-white focus:z-20":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20"}`,children:a},a)}),(0,t.jsxs)("button",{onClick:()=>l(e+1),disabled:e===r,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 disabled:opacity-50",children:[(0,t.jsx)("span",{className:"sr-only",children:"Next"}),(0,t.jsx)("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"})})]})]})})]})]})}e.s(["default",()=>r])}]);