(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[547],{63:(e,r,n)=>{"use strict";var s=n(7260);n.o(s,"useRouter")&&n.d(r,{useRouter:function(){return s.useRouter}}),n.o(s,"useSearchParams")&&n.d(r,{useSearchParams:function(){return s.useSearchParams}})},1547:(e,r,n)=>{Promise.resolve().then(n.bind(n,3928))},3928:(e,r,n)=>{"use strict";n.d(r,{default:()=>i});var s=n(5155),a=n(2115),l=n(6648),o=n(63),t=n(8566);function i(e){var r;let{product:n}=e,[i,c]=(0,a.useState)({name_en:(null==n?void 0:n.name_en)||"",name_mn:(null==n?void 0:n.name_mn)||"",brand:(null==n?void 0:n.brand)||"",sku:(null==n?void 0:n.sku)||"",price:(null==n?void 0:n.price)||0,original_price:(null==n?void 0:n.original_price)||0,discount:(null==n?void 0:n.discount)||0,stock:(null==n?void 0:n.stock)||0,sizes:(null==n||null==(r=n.sizes)?void 0:r.join(","))||"",description:(null==n?void 0:n.description)||"",subcategory:(null==n?void 0:n.subcategory)||"",category_id:(null==n?void 0:n.category_id)||"",brand_color:(null==n?void 0:n.brand_color)||"#F5F5F5",image_color:(null==n?void 0:n.image_color)||"#FAFAFA",has_financing:(null==n?void 0:n.has_financing)||!1}),[d,u]=(0,a.useState)([]),[b,g]=(0,a.useState)(!1),[m,x]=(0,a.useState)(""),p=(0,o.useRouter)(),f=(0,l.U)();async function h(){let{data:e}=await f.from("categories").select("*").order("name",{ascending:!0});e&&u(e)}function y(e){let{name:r,value:n,type:s}=e.target;"checkbox"===s?c(n=>({...n,[r]:e.target.checked})):c(e=>({...e,[r]:n}))}async function k(e){e.preventDefault(),g(!0),x("");try{let e=i.sizes?i.sizes.split(",").map(e=>parseInt(e.trim())).filter(e=>!isNaN(e)):[],r={title:i.name_en||i.name_mn||"Untitled Product",name_en:i.name_en,name_mn:i.name_mn,brand:i.brand,sku:i.sku,price:parseInt(i.price.toString()),original_price:parseInt(i.original_price.toString()),discount:parseInt(i.discount.toString()),stock:parseInt(i.stock.toString()),sizes:e,description:i.description,subcategory:i.subcategory,category_id:i.category_id?parseInt(i.category_id.toString()):null,brand_color:i.brand_color,image_color:i.image_color,has_financing:i.has_financing};if(null==n?void 0:n.id){let{error:e}=await f.from("products").update(r).eq("id",n.id);if(e)throw e;x("Бүтээгдэхүүн амжилттай шинэчлэгдлээ!")}else{let{error:e}=await f.from("products").insert([r]);if(e)throw e;x("Бүтээгдэхүүн амжилттай нэмэгдлээ!")}setTimeout(()=>{p.push("/admin/products"),p.refresh()},1500)}catch(e){console.error("Error saving product:",e),x("Алдаа гарлаа: ".concat((0,t.u)(e)))}finally{g(!1)}}return(0,a.useEffect)(()=>{h()},[]),(0,s.jsxs)("form",{onSubmit:k,className:"max-w-4xl space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 space-y-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-black mb-4",children:"Үндсэн мэдээлэл"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-base font-semibold text-black mb-2",children:"Нэр (Англи) *"}),(0,s.jsx)("input",{type:"text",name:"name_en",value:i.name_en,onChange:y,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-gray-400",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-base font-semibold text-black mb-2",children:"Нэр (Монгол) *"}),(0,s.jsx)("input",{type:"text",name:"name_mn",value:i.name_mn,onChange:y,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-gray-400",required:!0})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-base font-semibold text-black mb-2",children:"Брэнд *"}),(0,s.jsx)("input",{type:"text",name:"brand",value:i.brand,onChange:y,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-gray-400",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-base font-semibold text-black mb-2",children:"SKU *"}),(0,s.jsx)("input",{type:"text",name:"sku",value:i.sku,onChange:y,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-gray-400",required:!0})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-base font-semibold text-black mb-2",children:"Тайлбар"}),(0,s.jsx)("textarea",{name:"description",value:i.description,onChange:y,rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-gray-400"})]})]}),(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 space-y-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-black mb-4",children:"Үнийн мэдээлэл"}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-base font-semibold text-black mb-2",children:"Үнэ *"}),(0,s.jsx)("input",{type:"number",name:"price",value:i.price,onChange:y,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-gray-400",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-base font-semibold text-black mb-2",children:"Анхны үнэ *"}),(0,s.jsx)("input",{type:"number",name:"original_price",value:i.original_price,onChange:y,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-gray-400",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-base font-semibold text-black mb-2",children:"Хөнгөлөлт (%)"}),(0,s.jsx)("input",{type:"number",name:"discount",value:i.discount,onChange:y,min:"0",max:"100",className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-gray-400"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 space-y-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-black mb-4",children:"Ангилал & Нөөц"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-base font-semibold text-black mb-2",children:"Ангилал"}),(0,s.jsxs)("select",{name:"category_id",value:i.category_id,onChange:y,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-gray-400",children:[(0,s.jsx)("option",{value:"",children:"Сонгоно уу"}),d.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-base font-semibold text-black mb-2",children:"Дэд ангилал"}),(0,s.jsx)("input",{type:"text",name:"subcategory",value:i.subcategory,onChange:y,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-gray-400",placeholder:"Жишээ: Гутал"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-base font-semibold text-black mb-2",children:"Нөөц *"}),(0,s.jsx)("input",{type:"number",name:"stock",value:i.stock,onChange:y,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-gray-400",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-base font-semibold text-black mb-2",children:"Размерууд (таслалаар тусгаарлах)"}),(0,s.jsx)("input",{type:"text",name:"sizes",value:i.sizes,onChange:y,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-gray-400",placeholder:"35, 36, 37, 38, 39, 40"})]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",name:"has_financing",checked:i.has_financing,onChange:y,className:"w-5 h-5 text-gray-900 border-gray-300 rounded focus:ring-gray-400"}),(0,s.jsx)("label",{className:"ml-3 text-base font-medium text-black",children:"Зээлийн боломжтой"})]})]}),m&&(0,s.jsx)("div",{className:"p-4 rounded-lg ".concat(m.includes("амжилттай")?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:m}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{type:"submit",disabled:b,className:"px-6 py-3 rounded-lg text-base font-medium transition-colors ".concat(b?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-900 text-white hover:bg-gray-800"),children:b?"Хадгалж байна...":(null==n?void 0:n.id)?"Шинэчлэх":"Нэмэх"}),(0,s.jsx)("button",{type:"button",onClick:()=>p.back(),className:"px-6 py-3 border border-gray-300 rounded-lg text-base font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Цуцлах"})]})]})}},6648:(e,r,n)=>{"use strict";n.d(r,{U:()=>a});var s=n(5417);function a(){let e="https://ejdwrepyuznanwujidai.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVqZHdyZXB5dXpuYW53dWppZGFpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzNjk3NTYsImV4cCI6MjA4Mzk0NTc1Nn0.MRJe6csColzMRDpAWa-Ma99noAk6n8SbnXXHP2rNAJ4";return e&&r?(0,s.createBrowserClient)(e,r):(console.error("Missing Supabase environment variables"),(0,s.createBrowserClient)("https://placeholder.supabase.co","placeholder-key"))}},8566:(e,r,n)=>{"use strict";function s(e){return e instanceof Error?e.message:"string"==typeof e?e:e&&"object"==typeof e&&"message"in e?String(e.message):"Тодорхойгүй алдаа гарлаа"}n.d(r,{u:()=>s})}}]);