(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8927],{5316:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});var a=s(5155),l=s(2115);function t(){let[e,r]=(0,l.useState)(!1),[s,t]=(0,l.useState)(null),[n,d]=(0,l.useState)("");async function c(){r(!0),d(""),t(null);try{let e=await fetch("/api/admin/fix-image-urls",{method:"POST"}),r=await e.json();if(!e.ok)throw Error(r.error||"Failed to fix images");t(r)}catch(e){d(e instanceof Error?e.message:"Unknown error")}finally{r(!1)}}return(0,a.jsxs)("div",{className:"p-8 max-w-2xl",children:[(0,a.jsx)("h1",{className:"text-3xl font-semibold text-gray-900 mb-4",children:"Зургийн URL-ийг засах"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:["Cloudflare R2-д хадгалсан зургуудын URL-ийг зөв хэлбэрт оруулна. Энэ нь ",(0,a.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"/commerce/products/"})," гэсэн хэсгийг арилгаж"," ",(0,a.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"/products/"})," болгоно."]}),(0,a.jsx)("button",{onClick:c,disabled:e,className:"px-6 py-3 rounded-lg text-base font-medium transition-colors ".concat(e?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-900 text-white hover:bg-gray-800"),children:e?"Засч байна...":"Зургийн URL засах"}),n&&(0,a.jsxs)("div",{className:"mt-6 p-4 bg-red-50 text-red-800 border border-red-200 rounded-lg",children:[(0,a.jsx)("strong",{children:"Алдаа:"})," ",n]}),s&&(0,a.jsxs)("div",{className:"mt-6 p-4 bg-green-50 text-green-800 border border-green-200 rounded-lg",children:[(0,a.jsx)("strong",{children:"Амжилттай!"}),(0,a.jsxs)("ul",{className:"mt-2 space-y-1",children:[(0,a.jsxs)("li",{children:["• ",s.message]}),(0,a.jsxs)("li",{children:["• Нийт бүтээгдэхүүн: ",s.total]}),(0,a.jsxs)("li",{children:["• Засагдсан: ",s.updated]})]}),s.errors&&s.errors.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("strong",{children:"Алдаанууд:"}),(0,a.jsx)("ul",{className:"mt-2 space-y-1",children:s.errors.map((e,r)=>(0,a.jsxs)("li",{className:"text-sm",children:["• ",e]},r))})]})]})]})}},6840:(e,r,s)=>{Promise.resolve().then(s.bind(s,5316))}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=6840)),_N_E=e.O()}]);