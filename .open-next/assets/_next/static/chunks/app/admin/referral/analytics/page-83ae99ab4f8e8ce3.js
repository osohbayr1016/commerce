(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4749],{25151:(e,s,l)=>{Promise.resolve().then(l.bind(l,90466))},90466:(e,s,l)=>{"use strict";l.d(s,{default:()=>a});var r=l(95155),t=l(12115);function a(){var e,s,l,a,d,c,i,n,o,x;let[m,g]=(0,t.useState)(null),[p,h]=(0,t.useState)(!0);(0,t.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=await fetch("/api/admin/referral-analytics");if(e.ok){let s=await e.json();g(s)}}catch(e){console.error("Failed to fetch analytics:",e)}finally{h(!1)}};return p?(0,r.jsx)("div",{className:"text-center py-8",children:"Уншиж байна..."}):m?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Нийт хэрэглэгчид"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:(null==(e=m.summary)?void 0:e.total_users)||0})]}),(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-xl p-5",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Referral бүхий"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-green-600 mt-2",children:(null==(s=m.summary)?void 0:s.users_with_referrals)||0})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-5",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Нийт referrals"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:(null==(l=m.summary)?void 0:l.total_referrals)||0})]}),(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-5",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Дундаж referral"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-yellow-600 mt-2",children:(null==(d=m.summary)||null==(a=d.avg_referrals_per_user)?void 0:a.toFixed(1))||0})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Хамгийн их ашиглагдсан Promo Code"}),(null==(c=m.top_promo_codes)?void 0:c.length)===0?(0,r.jsx)("p",{className:"text-gray-500 text-center py-4",children:"Мэдээлэл байхгүй"}):(0,r.jsx)("div",{className:"space-y-2",children:null==(i=m.top_promo_codes)?void 0:i.slice(0,5).map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("span",{className:"text-2xl font-bold text-gray-400",children:["#",s+1]}),(0,r.jsx)("span",{className:"font-mono font-semibold text-gray-900",children:e.promo_code})]}),(0,r.jsx)("span",{className:"text-lg font-bold text-blue-600",children:e.usage_count})]},e.promo_code))})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Referrers"}),(null==(n=m.top_referrers)?void 0:n.length)===0?(0,r.jsx)("p",{className:"text-gray-500 text-center py-4",children:"Мэдээлэл байхгүй"}):(0,r.jsx)("div",{className:"space-y-2",children:null==(o=m.top_referrers)?void 0:o.slice(0,5).map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:e.full_name||"Хэрэглэгч"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 font-mono",children:e.promo_code||"N/A"})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-lg font-bold text-gray-900",children:e.total_referrals}),(0,r.jsxs)("p",{className:"text-xs text-yellow-600",children:[e.accumulated_discount_percent,"% discount"]})]})]},e.id))})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Discount тархалт"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:Object.entries(m.discount_distribution||{}).map(e=>{let[s,l]=e;return(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 text-center",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:s}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:l})]},s)})})]}),(0,r.jsxs)("div",{className:" from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Нийт олгосон Discount"}),(0,r.jsxs)("p",{className:"text-5xl font-bold text-purple-600",children:[(null==(x=m.summary)?void 0:x.total_discount_awarded)||0,"%"]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Бүх хэрэглэгчдийн нийлбэр"})]})]}):(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Мэдээлэл алга"})}}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=25151)),_N_E=e.O()}]);