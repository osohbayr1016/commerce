(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[631],{3700:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>i});var t=a(5155),r=a(2115),n=a(6648),l=a(8566);function i(){let[e,s]=(0,r.useState)([]),[a,i]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null),[o,m]=(0,r.useState)({name:"",name_en:"",name_mn:"",slug:"",is_active:!0,display_order:0,show_in_header:!1}),[x,u]=(0,r.useState)(""),g=(0,n.U)(),h=(0,r.useCallback)(async()=>{try{let{data:e,error:a}=await g.from("categories").select("*").order("display_order",{ascending:!0});if(a)throw a;s(e||[])}catch(e){console.error("Error fetching categories:",e)}finally{i(!1)}},[g]);function b(){m({name:"",name_en:"",name_mn:"",slug:"",is_active:!0,display_order:0,show_in_header:!1}),d(null)}async function p(e){e.preventDefault(),u("");try{if(c){let{error:e}=await g.from("categories").update({name:o.name,name_en:o.name_en,name_mn:o.name_mn,slug:o.slug,is_active:o.is_active,display_order:o.display_order,show_in_header:o.show_in_header}).eq("id",c);if(e)throw e;u("Ангилал амжилттай шинэчлэгдлээ!")}else{let{error:e}=await g.from("categories").insert([{name:o.name,name_en:o.name_en,name_mn:o.name_mn,slug:o.slug,is_active:o.is_active,display_order:o.display_order,show_in_header:o.show_in_header}]);if(e)throw e;u("Ангилал амжилттай нэмэгдлээ!")}b(),h(),setTimeout(()=>u(""),3e3)}catch(e){console.error("Error saving category:",e),u("Алдаа гарлаа: ".concat((0,l.u)(e)))}}async function y(e){if(confirm("Та энэ ангилалыг устгахдаа итгэлтэй байна уу?"))try{let{error:s}=await g.from("categories").delete().eq("id",e);if(s)throw s;u("Ангилал амжилттай устгагдлаа!"),h(),setTimeout(()=>u(""),3e3)}catch(e){console.error("Error deleting category:",e),u("Алдаа гарлаа: ".concat((0,l.u)(e)))}}return(0,r.useEffect)(()=>{h()},[h]),a?(0,t.jsx)("div",{className:"p-8",children:(0,t.jsx)("div",{className:"text-center text-gray-600",children:"Ачааллаж байна..."})}):(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-semibold text-gray-900 mb-2",children:"Ангилал"}),(0,t.jsx)("p",{className:"text-base text-gray-600",children:"Ангилалуудыг удирдах"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-black mb-4",children:c?"Ангилал засах":"Шинэ ангилал"}),(0,t.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-black mb-2",children:"Нэр *"}),(0,t.jsx)("input",{type:"text",value:o.name,onChange:e=>m({...o,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-gray-400",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-black mb-2",children:"Нэр (Англи)"}),(0,t.jsx)("input",{type:"text",value:o.name_en,onChange:e=>m({...o,name_en:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-gray-400"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-black mb-2",children:"Нэр (Монгол)"}),(0,t.jsx)("input",{type:"text",value:o.name_mn,onChange:e=>m({...o,name_mn:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-gray-400"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-black mb-2",children:"Slug *"}),(0,t.jsx)("input",{type:"text",value:o.slug,onChange:e=>m({...o,slug:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-gray-400",placeholder:"women-boots",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-black mb-2",children:"Эрэмбэ"}),(0,t.jsx)("input",{type:"number",value:o.display_order,onChange:e=>m({...o,display_order:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-gray-400"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",checked:o.is_active,onChange:e=>m({...o,is_active:e.target.checked}),className:"w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-400"}),(0,t.jsx)("label",{className:"ml-2 text-sm font-medium text-black",children:"Идэвхитэй"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",checked:o.show_in_header,onChange:e=>m({...o,show_in_header:e.target.checked}),className:"w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-400"}),(0,t.jsx)("label",{className:"ml-2 text-sm font-medium text-black",children:"Толгойн цэсэнд харуулах"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-gray-900 text-white rounded-lg text-sm font-medium hover:bg-gray-800 transition-colors",children:c?"Шинэчлэх":"Нэмэх"}),c&&(0,t.jsx)("button",{type:"button",onClick:b,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Цуцлах"})]})]})]})}),(0,t.jsxs)("div",{className:"lg:col-span-2",children:[x&&(0,t.jsx)("div",{className:"mb-4 p-4 rounded-lg ".concat(x.includes("амжилттай")?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:x}),(0,t.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-900",children:"Нэр"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-900",children:"Slug"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-900",children:"Төлөв"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right text-sm font-medium text-gray-900",children:"Үйлдэл"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-200",children:e.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsxs)("td",{className:"px-6 py-4",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.name_mn&&(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.name_mn})]}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.slug}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"inline-block px-2 py-1 rounded text-xs font-medium ".concat(e.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.is_active?"Идэвхитэй":"Идэвхгүй"}),e.show_in_header&&(0,t.jsx)("span",{className:"inline-block px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Толгойн цэс"})]})}),(0,t.jsxs)("td",{className:"px-6 py-4 text-right text-sm space-x-2",children:[(0,t.jsx)("button",{onClick:()=>{var s,a;d(e.id),m({name:e.name,name_en:e.name_en||"",name_mn:e.name_mn||"",slug:e.slug,is_active:null==(s=e.is_active)||s,display_order:e.display_order||0,show_in_header:null!=(a=e.show_in_header)&&a})},className:"text-gray-700 hover:text-gray-900 font-medium",children:"Засах"}),(0,t.jsx)("button",{onClick:()=>y(e.id),className:"text-red-600 hover:text-red-700 font-medium",children:"Устгах"})]})]},e.id))})]}),0===e.length&&(0,t.jsx)("div",{className:"p-12 text-center text-gray-600",children:"Ангилал байхгүй байна"})]})]})]})]})}},6648:(e,s,a)=>{"use strict";a.d(s,{U:()=>r});var t=a(5417);function r(){let e="https://ejdwrepyuznanwujidai.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVqZHdyZXB5dXpuYW53dWppZGFpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzNjk3NTYsImV4cCI6MjA4Mzk0NTc1Nn0.MRJe6csColzMRDpAWa-Ma99noAk6n8SbnXXHP2rNAJ4";return e&&s?(0,t.createBrowserClient)(e,s):(console.error("Missing Supabase environment variables"),(0,t.createBrowserClient)("https://placeholder.supabase.co","placeholder-key"))}},6808:(e,s,a)=>{Promise.resolve().then(a.bind(a,3700))},8566:(e,s,a)=>{"use strict";function t(e){return e instanceof Error?e.message:"string"==typeof e?e:e&&"object"==typeof e&&"message"in e?String(e.message):"Тодорхойгүй алдаа гарлаа"}a.d(s,{u:()=>t})}},e=>{e.O(0,[417,441,493,358],()=>e(e.s=6808)),_N_E=e.O()}]);