(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6631],{10832:(e,t,s)=>{"use strict";s.d(t,{ModalProvider:()=>d,h:()=>c});var r=s(95155),n=s(25959),a=s(12115),i=s(47650);function l(e){let{isOpen:t,type:s,title:n,message:l,confirmText:o="OK",cancelText:c="Cancel",onConfirm:d,onCancel:u,onClose:m}=e;if((0,a.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t&&m()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,m]),!t)return null;let x=()=>{d?d():m()},g=(0,r.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex min-h-screen items-end justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:m}),(0,r.jsx)("span",{className:"hidden sm:inline-block sm:h-screen sm:align-middle",children:"​"}),(0,r.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[(0,r.jsxs)("div",{children:[(()=>{switch(s){case"success":return(0,r.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100",children:(0,r.jsx)("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})});case"error":return(0,r.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:(0,r.jsx)("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})});case"warning":return(0,r.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100",children:(0,r.jsx)("svg",{className:"h-6 w-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})});case"confirm":return(0,r.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-blue-100",children:(0,r.jsx)("svg",{className:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}})(),(0,r.jsxs)("div",{className:"mt-3 text-center sm:mt-5",children:[(0,r.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:n}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("p",{className:"text-sm text-gray-500",children:l})})]})]}),(0,r.jsx)("div",{className:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense",children:"confirm"===s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{type:"button",onClick:x,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:col-start-2 sm:text-sm",children:o}),(0,r.jsx)("button",{type:"button",onClick:()=>{u?u():m()},className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:col-start-1 sm:text-sm",children:c})]}):(0,r.jsx)("button",{type:"button",onClick:x,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:col-span-2 sm:text-sm",children:o})})]})]})});return"undefined"!=typeof document?(0,i.createPortal)(g,document.body):null}let o=(0,n.v)(e=>({isOpen:!1,type:"success",title:"",message:"",confirmText:"OK",cancelText:"Cancel",showModal:t=>e({...t,isOpen:!0}),closeModal:()=>e({isOpen:!1})}));function c(){let e=o();return{showSuccess:function(t,s){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";e.showModal({type:"success",title:t,message:s,confirmText:r})},showError:function(t,s){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";e.showModal({type:"error",title:t,message:s,confirmText:r})},showWarning:function(t,s){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";e.showModal({type:"warning",title:t,message:s,confirmText:r})},showConfirm:function(t,s,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Confirm",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Cancel";e.showModal({type:"confirm",title:t,message:s,confirmText:n,cancelText:a,onConfirm:r})},close:e.closeModal}}function d(){let e=o();return(0,r.jsx)(l,{isOpen:e.isOpen,type:e.type,title:e.title,message:e.message,confirmText:e.confirmText,cancelText:e.cancelText,onConfirm:e.onConfirm,onCancel:e.onCancel,onClose:e.closeModal})}},25959:(e,t,s)=>{"use strict";s.d(t,{v:()=>i});var r=s(12115);let n=e=>{let t,s=new Set,r=(e,r)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=r?r:"object"!=typeof n||null===n)?n:Object.assign({},t,n),s.forEach(s=>s(t,e))}},n=()=>t,a={setState:r,getState:n,getInitialState:()=>i,subscribe:e=>(s.add(e),()=>s.delete(e))},i=t=e(r,n,a);return a},a=e=>{let t=(e=>e?n(e):n)(e),s=e=>(function(e,t=e=>e){let s=r.useSyncExternalStore(e.subscribe,r.useCallback(()=>t(e.getState()),[e,t]),r.useCallback(()=>t(e.getInitialState()),[e,t]));return r.useDebugValue(s),s})(t,e);return Object.assign(s,t),s},i=e=>e?a(e):a},26808:(e,t,s)=>{Promise.resolve().then(s.bind(s,70207))},70207:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(95155),n=s(12115),a=s(96648),i=s(88566);function l(e){let{editing:t,formData:s,onFormChange:n,onSubmit:a,onCancel:i,loading:l}=e,o=async e=>{e.preventDefault(),await a()};return(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:t?"Ангилал засах":"Шинэ ангилал нэмэх"}),(0,r.jsxs)("form",{onSubmit:o,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Нэр"}),(0,r.jsx)("input",{type:"text",value:s.name,onChange:e=>n("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"English Name"}),(0,r.jsx)("input",{type:"text",value:s.name_en,onChange:e=>n("name_en",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Монгол нэр"}),(0,r.jsx)("input",{type:"text",value:s.name_mn,onChange:e=>n("name_mn",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug"}),(0,r.jsx)("input",{type:"text",value:s.slug,onChange:e=>n("slug",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Order"}),(0,r.jsx)("input",{type:"number",value:s.display_order,onChange:e=>n("display_order",Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:s.is_active,onChange:e=>n("is_active",e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:"Active"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:s.show_in_header,onChange:e=>n("show_in_header",e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:"Show in Header Navigation"})]})]}),(0,r.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,r.jsx)("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Saving...":t?"Update":"Create"}),t&&(0,r.jsx)("button",{type:"button",onClick:i,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]})}var o=s(10832);function c(e){let{categories:t,loading:s,onEdit:n,onDelete:a,onToggleActive:i}=e,l=(0,o.h)();return s?(0,r.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:(0,r.jsx)("p",{className:"text-gray-600",children:"Loading categories..."})}):0===t.length?(0,r.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:(0,r.jsx)("p",{className:"text-gray-600",children:"No categories found"})}):(0,r.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Slug"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Header"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.name_en&&(0,r.jsx)("div",{className:"text-xs text-gray-500",children:e.name_en})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.slug}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.display_order}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("button",{onClick:()=>i(e.id,!e.is_active),className:"px-2 py-1 text-xs font-medium rounded-full ".concat(e.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.is_active?"Active":"Inactive"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.show_in_header?"Yes":"No"}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,r.jsx)("button",{onClick:()=>n(e),className:"text-blue-600 hover:text-blue-900 mr-4",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>{l.showConfirm("Ангилал устгах","Та энэ ангилалыг устгахдаа итгэлтэй байна уу?",()=>a(e.id),"Устгах","Болих")},className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e.id))})]})})}function d(){let[e,t]=(0,n.useState)([]),[s,o]=(0,n.useState)(!0),[d,u]=(0,n.useState)(null),[m,x]=(0,n.useState)({name:"",name_en:"",name_mn:"",slug:"",is_active:!0,display_order:0,show_in_header:!1}),[g,h]=(0,n.useState)(""),p=(0,a.U)(),f=(0,n.useCallback)(async()=>{try{let{data:e,error:s}=await p.from("categories").select("*").order("display_order",{ascending:!0});if(s)throw s;t(e||[])}catch(e){}finally{o(!1)}},[p]);function b(){x({name:"",name_en:"",name_mn:"",slug:"",is_active:!0,display_order:0,show_in_header:!1}),u(null),h("")}async function y(){o(!0);try{if(d){let{error:e}=await p.from("categories").update(m).eq("id",d);if(e)throw e;h("Category updated successfully")}else{let{error:e}=await p.from("categories").insert([m]);if(e)throw e;h("Category created successfully")}b(),await f()}catch(e){h("Error: ".concat((0,i.u)(e)))}finally{o(!1)}}async function j(e){try{let{error:t}=await p.from("categories").delete().eq("id",e);if(t)throw t;h("Category deleted successfully"),await f()}catch(e){h("Error: ".concat((0,i.u)(e)))}}async function w(e,t){try{let{error:s}=await p.from("categories").update({is_active:t}).eq("id",e);if(s)throw s;await f()}catch(e){h("Error: ".concat((0,i.u)(e)))}}return(0,n.useEffect)(()=>{f()},[f]),(0,r.jsxs)("div",{className:"p-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-semibold text-gray-900 mb-2",children:"Ангилал удирдах"}),(0,r.jsx)("p",{className:"text-base text-gray-600",children:"Бүтээгдэхүүний ангилал нэмэх, засах"})]}),g&&(0,r.jsx)("div",{className:"mb-6 p-4 rounded-lg ".concat(g.includes("Error")?"bg-red-50 text-red-800":"bg-green-50 text-green-800"),children:g}),(0,r.jsx)(l,{editing:d,formData:m,onFormChange:function(e,t){x(s=>({...s,[e]:t}))},onSubmit:y,onCancel:b,loading:s}),(0,r.jsx)(c,{categories:e,loading:s,onEdit:function(e){var t;x({name:e.name,name_en:e.name_en||"",name_mn:e.name_mn||"",slug:e.slug,is_active:null==(t=e.is_active)||t,display_order:e.display_order||0,show_in_header:e.show_in_header||!1}),u(e.id),h("")},onDelete:j,onToggleActive:w})]})}},88566:(e,t,s)=>{"use strict";function r(e){if(e instanceof Error)return e.message;if("string"==typeof e)return e;if(e&&"object"==typeof e){if("message"in e)return String(e.message);if("msg"in e)return String(e.msg)}return"Тодорхойгүй алдаа гарлаа"}s.d(t,{u:()=>r})},96648:(e,t,s)=>{"use strict";s.d(t,{U:()=>l});var r=s(55417);let n="https://ejdwrepyuznanwujidai.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVqZHdyZXB5dXpuYW53dWppZGFpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzNjk3NTYsImV4cCI6MjA4Mzk0NTc1Nn0.MRJe6csColzMRDpAWa-Ma99noAk6n8SbnXXHP2rNAJ4",i=null;function l(){!n||n.includes("placeholder")||n.includes("MISSING")?console.error("❌ Supabase configuration missing!\n\nNEXT_PUBLIC_SUPABASE_URL is not set.\n\nTo fix this:\n1. Go to Cloudflare Dashboard → Workers & Pages → Your Project\n2. Settings → Environment variables\n3. Add NEXT_PUBLIC_SUPABASE_URL with your Supabase project URL\n\nSee DEPLOYMENT.md for detailed instructions."):(!a||a.includes("placeholder")||a.includes("MISSING"))&&console.error("❌ Supabase configuration missing!\n\nNEXT_PUBLIC_SUPABASE_ANON_KEY is not set.\n\nTo fix this:\n1. Go to Cloudflare Dashboard → Workers & Pages → Your Project\n2. Settings → Environment variables\n3. Add NEXT_PUBLIC_SUPABASE_ANON_KEY with your Supabase anon key\n\nSee DEPLOYMENT.md for detailed instructions.");let e=!n||n.includes("placeholder")||n.includes("MISSING")?"https://placeholder.supabase.co":n,t=!a||a.includes("placeholder")||a.includes("MISSING")?"placeholder-key":a;return i||(i=(0,r.createBrowserClient)(e,t)),i}}},e=>{e.O(0,[1500,5417,8441,1255,7358],()=>e(e.s=26808)),_N_E=e.O()}]);