(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[631],{3700:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var a=t(5155),r=t(2115),n=t(6648),l=t(8566);function i(){let[e,s]=(0,r.useState)([]),[t,i]=(0,r.useState)(!0),[d,c]=(0,r.useState)(null),[o,m]=(0,r.useState)({name:"",name_en:"",name_mn:"",slug:"",is_active:!0,display_order:0,show_in_header:!1}),[x,u]=(0,r.useState)(""),g=(0,n.U)(),h=(0,r.useCallback)(async()=>{try{let{data:e,error:t}=await g.from("categories").select("*").order("display_order",{ascending:!0});if(t)throw t;s(e||[])}catch(e){console.error("Error fetching categories:",e)}finally{i(!1)}},[g]);function b(){m({name:"",name_en:"",name_mn:"",slug:"",is_active:!0,display_order:0,show_in_header:!1}),c(null)}async function p(e){e.preventDefault(),u("");try{var s,t,a,r,n,i,c,m;let e={name:o.name,name_en:o.name_en,name_mn:o.name_mn,slug:o.slug,is_active:o.is_active,display_order:o.display_order};if(d){let n={...e};void 0!==o.show_in_header&&(n.show_in_header=o.show_in_header);let{error:l}=await g.from("categories").update(n).eq("id",d);if(l&&((null==(s=l.message)?void 0:s.includes("show_in_header"))||(null==(t=l.message)?void 0:t.includes("Could not find"))||(null==(a=l.message)?void 0:a.includes("column"))&&(null==(r=l.message)?void 0:r.includes("does not exist")))&&({error:l}=await g.from("categories").update(e).eq("id",d)),l)throw l;u("Ангилал амжилттай шинэчлэгдлээ!")}else{let s={...e};void 0!==o.show_in_header&&(s.show_in_header=o.show_in_header);let{error:t}=await g.from("categories").insert([s]);if(t&&((null==(n=t.message)?void 0:n.includes("show_in_header"))||(null==(i=t.message)?void 0:i.includes("Could not find"))||(null==(c=t.message)?void 0:c.includes("column"))&&(null==(m=t.message)?void 0:m.includes("does not exist")))&&({error:t}=await g.from("categories").insert([e])),t)throw t;u("Ангилал амжилттай нэмэгдлээ!")}b(),h(),setTimeout(()=>u(""),3e3)}catch(e){console.error("Error saving category:",e),u("Алдаа гарлаа: ".concat((0,l.u)(e)))}}async function y(e){if(confirm("Та энэ ангилалыг устгахдаа итгэлтэй байна уу?"))try{let{error:s}=await g.from("categories").delete().eq("id",e);if(s)throw s;u("Ангилал амжилттай устгагдлаа!"),h(),setTimeout(()=>u(""),3e3)}catch(e){console.error("Error deleting category:",e),u("Алдаа гарлаа: ".concat((0,l.u)(e)))}}return(0,r.useEffect)(()=>{h()},[h]),t?(0,a.jsx)("div",{className:"p-8",children:(0,a.jsx)("div",{className:"text-center text-gray-600",children:"Ачааллаж байна..."})}):(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-semibold text-gray-900 mb-2",children:"Ангилал"}),(0,a.jsx)("p",{className:"text-base text-gray-600",children:"Ангилалуудыг удирдах"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-black mb-4",children:d?"Ангилал засах":"Шинэ ангилал"}),(0,a.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-black mb-2",children:"Нэр *"}),(0,a.jsx)("input",{type:"text",value:o.name,onChange:e=>m({...o,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-gray-400",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-black mb-2",children:"Нэр (Англи)"}),(0,a.jsx)("input",{type:"text",value:o.name_en,onChange:e=>m({...o,name_en:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-gray-400"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-black mb-2",children:"Нэр (Монгол)"}),(0,a.jsx)("input",{type:"text",value:o.name_mn,onChange:e=>m({...o,name_mn:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-gray-400"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-black mb-2",children:"Slug *"}),(0,a.jsx)("input",{type:"text",value:o.slug,onChange:e=>m({...o,slug:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-gray-400",placeholder:"women-boots",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-black mb-2",children:"Эрэмбэ"}),(0,a.jsx)("input",{type:"number",value:o.display_order,onChange:e=>m({...o,display_order:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-gray-400"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:o.is_active,onChange:e=>m({...o,is_active:e.target.checked}),className:"w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-400"}),(0,a.jsx)("label",{className:"ml-2 text-sm font-medium text-black",children:"Идэвхитэй"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:o.show_in_header,onChange:e=>m({...o,show_in_header:e.target.checked}),className:"w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-400"}),(0,a.jsx)("label",{className:"ml-2 text-sm font-medium text-black",children:"Толгойн цэсэнд харуулах"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-gray-900 text-white rounded-lg text-sm font-medium hover:bg-gray-800 transition-colors",children:d?"Шинэчлэх":"Нэмэх"}),d&&(0,a.jsx)("button",{type:"button",onClick:b,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Цуцлах"})]})]})]})}),(0,a.jsxs)("div",{className:"lg:col-span-2",children:[x&&(0,a.jsx)("div",{className:"mb-4 p-4 rounded-lg ".concat(x.includes("амжилттай")?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:x}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-900",children:"Нэр"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-900",children:"Slug"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-900",children:"Төлөв"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-sm font-medium text-gray-900",children:"Үйлдэл"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.name_mn&&(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.name_mn})]}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.slug}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("span",{className:"inline-block px-2 py-1 rounded text-xs font-medium ".concat(e.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.is_active?"Идэвхитэй":"Идэвхгүй"}),e.show_in_header&&(0,a.jsx)("span",{className:"inline-block px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Толгойн цэс"})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 text-right text-sm space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{var s,t;c(e.id),m({name:e.name,name_en:e.name_en||"",name_mn:e.name_mn||"",slug:e.slug,is_active:null==(s=e.is_active)||s,display_order:e.display_order||0,show_in_header:null!=(t=e.show_in_header)&&t})},className:"text-gray-700 hover:text-gray-900 font-medium",children:"Засах"}),(0,a.jsx)("button",{onClick:()=>y(e.id),className:"text-red-600 hover:text-red-700 font-medium",children:"Устгах"})]})]},e.id))})]}),0===e.length&&(0,a.jsx)("div",{className:"p-12 text-center text-gray-600",children:"Ангилал байхгүй байна"})]})]})]})]})}},6648:(e,s,t)=>{"use strict";t.d(s,{U:()=>r});var a=t(5417);function r(){let e="https://ejdwrepyuznanwujidai.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVqZHdyZXB5dXpuYW53dWppZGFpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzNjk3NTYsImV4cCI6MjA4Mzk0NTc1Nn0.MRJe6csColzMRDpAWa-Ma99noAk6n8SbnXXHP2rNAJ4";return e&&s?(0,a.createBrowserClient)(e,s):(console.error("Missing Supabase environment variables"),(0,a.createBrowserClient)("https://placeholder.supabase.co","placeholder-key"))}},6808:(e,s,t)=>{Promise.resolve().then(t.bind(t,3700))},8566:(e,s,t)=>{"use strict";function a(e){return e instanceof Error?e.message:"string"==typeof e?e:e&&"object"==typeof e&&"message"in e?String(e.message):"Тодорхойгүй алдаа гарлаа"}t.d(s,{u:()=>a})}},e=>{e.O(0,[417,441,493,358],()=>e(e.s=6808)),_N_E=e.O()}]);