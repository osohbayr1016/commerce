(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3759],{8290:(e,n,s)=>{Promise.resolve().then(s.bind(s,29508))},29508:(e,n,s)=>{"use strict";s.r(n),s.d(n,{default:()=>o});var i=s(95155),a=s(12115),r=s(96648);function o(){let[e,n]=(0,a.useState)(""),[s,o]=(0,a.useState)(!1),t=(0,r.U)(),l=async()=>{o(!0),n("Running diagnostics...\n\n");try{let{data:{session:e}}=await t.auth.getSession();n(n=>n+"✓ Current session: ".concat(e?"Logged in":"Not logged in","\n")),e&&(n(n=>n+"  User ID: ".concat(e.user.id,"\n")),n(n=>n+"  Email: ".concat(e.user.email,"\n\n")));let{data:s,error:i}=await t.rpc("get_profile_columns"),{data:a,error:r}=await t.from("profiles").select("id, email, phone_number, full_name, role").limit(1);r?r.message.includes("column")&&r.message.includes("does not exist")?(n(e=>e+"✗ ERROR: Missing columns in profiles table!\n"),n(e=>e+"  Details: ".concat(r.message,"\n\n")),n(e=>e+"\uD83D\uDD27 FIX: Run QUICK_FIX_LOGIN.sql in Supabase SQL Editor\n\n")):n(e=>e+"✗ Profile check error: ".concat(r.message,"\n\n")):n(e=>e+"✓ Profiles table structure is correct\n\n");let{count:o}=await t.from("profiles").select("*",{count:"exact",head:!0});n(e=>e+"\uD83D\uDCCA Total users in database: ".concat(o,"\n\n")),n(e=>e+"Testing phone lookup:\n");let{data:l,error:c}=await t.from("profiles").select("email, phone_number").eq("phone_number","99999999").single();c?"PGRST116"===c.code?n(e=>e+"  ℹ️ No user with phone 99999999\n\n"):n(e=>e+"  ✗ Error: ".concat(c.message,"\n\n")):n(e=>e+"  ✓ Found user: ".concat(l.email,"\n\n")),n(e=>e+"\n✅ Diagnostics complete!\n\n"),n(e=>e+"NEXT STEPS:\n"),n(e=>e+"1. If you see errors above, run QUICK_FIX_LOGIN.sql\n"),n(e=>e+"2. Try logging in with your EMAIL (not phone)\n"),n(e=>e+"3. If still not working, create a new account at /auth/signup\n")}catch(e){n(n=>n+"\n❌ Fatal error: ".concat(e,"\n"))}finally{o(!1)}};return(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:(0,i.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"\uD83D\uDD0D Authentication Debugger"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"Run diagnostics to find out why login isn't working"}),(0,i.jsx)("button",{onClick:l,disabled:s,className:"px-6 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:bg-gray-400 mb-6",children:s?"Running...":"Run Diagnostics"}),e&&(0,i.jsx)("div",{className:"bg-gray-900 text-green-400 p-6 rounded-lg font-mono text-sm whitespace-pre-wrap",children:e}),(0,i.jsxs)("div",{className:"mt-8 p-6 bg-blue-50 rounded-lg",children:[(0,i.jsx)("h3",{className:"font-bold text-blue-900 mb-2",children:"Quick Fixes:"}),(0,i.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-blue-800",children:[(0,i.jsxs)("li",{children:["Run ",(0,i.jsx)("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"QUICK_FIX_LOGIN.sql"})," in Supabase"]}),(0,i.jsxs)("li",{children:["Try logging in with your ",(0,i.jsx)("strong",{children:"email"})," (not phone number)"]}),(0,i.jsx)("li",{children:"Check browser console (F12) for error messages"}),(0,i.jsxs)("li",{children:["Create a new account at ",(0,i.jsx)("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"/auth/signup"})]})]})]})]})})})}},96648:(e,n,s)=>{"use strict";s.d(n,{U:()=>t});var i=s(55417);let a="https://ejdwrepyuznanwujidai.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVqZHdyZXB5dXpuYW53dWppZGFpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzNjk3NTYsImV4cCI6MjA4Mzk0NTc1Nn0.MRJe6csColzMRDpAWa-Ma99noAk6n8SbnXXHP2rNAJ4",o=null;function t(){!a||a.includes("placeholder")||a.includes("MISSING")?console.error("❌ Supabase configuration missing!\n\nNEXT_PUBLIC_SUPABASE_URL is not set.\n\nTo fix this:\n1. Go to Cloudflare Dashboard → Workers & Pages → Your Project\n2. Settings → Environment variables\n3. Add NEXT_PUBLIC_SUPABASE_URL with your Supabase project URL\n\nSee DEPLOYMENT.md for detailed instructions."):(!r||r.includes("placeholder")||r.includes("MISSING"))&&console.error("❌ Supabase configuration missing!\n\nNEXT_PUBLIC_SUPABASE_ANON_KEY is not set.\n\nTo fix this:\n1. Go to Cloudflare Dashboard → Workers & Pages → Your Project\n2. Settings → Environment variables\n3. Add NEXT_PUBLIC_SUPABASE_ANON_KEY with your Supabase anon key\n\nSee DEPLOYMENT.md for detailed instructions.");let e=!a||a.includes("placeholder")||a.includes("MISSING")?"https://placeholder.supabase.co":a,n=!r||r.includes("placeholder")||r.includes("MISSING")?"placeholder-key":r;return o||(o=(0,i.createBrowserClient)(e,n)),o}}},e=>{e.O(0,[1500,5417,8441,1255,7358],()=>e(e.s=8290)),_N_E=e.O()}]);