(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2959],{178:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var a=r(5155),s=r(63),l=r(2115);let n=[{value:"newest",label:"Шинэ"},{value:"oldest",label:"Хуучин"},{value:"price_asc",label:"Үнэ: Багаас их рүү"},{value:"price_desc",label:"Үнэ: Ихээс бага руу"},{value:"popularity",label:"Алдартай"},{value:"discount",label:"Хямдралтай"}];function o(){var e;let t=(0,s.useRouter)(),r=(0,s.useSearchParams)(),[o,c]=(0,l.useState)("newest"),[i,d]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=r.get("sort");e&&n.some(t=>t.value===e)&&c(e)},[r]);let u=(null==(e=n.find(e=>e.value===o))?void 0:e.label)||"Шинэ";return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>d(!i),className:"flex items-center justify-between gap-2 px-4 py-2 border border-gray-200 rounded-lg text-sm font-medium text-gray-700 hover:border-gray-300 min-w-[200px]",children:[(0,a.jsx)("span",{children:u}),(0,a.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(i?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>d(!1)}),(0,a.jsx)("div",{className:"absolute top-full left-0 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg z-20",children:n.map(e=>(0,a.jsx)("button",{onClick:()=>(e=>{c(e),d(!1);let a=new URLSearchParams(r.toString());a.set("sort",e),a.delete("page"),t.push("?".concat(a.toString()))})(e.value),className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg ".concat(o===e.value?"bg-gray-50 font-medium text-gray-900":"text-gray-700"),children:e.label},e.value))})]})]})}},7604:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var a=r(5155),s=r(2115),l=r(63),n=r(4269);function o(e){let{onClose:t,initialQuery:r=""}=e,[o,c]=(0,s.useState)(r),[i,d]=(0,s.useState)([]),[u,m]=(0,s.useState)(!1),[x,g]=(0,s.useState)(-1),[h,b]=(0,s.useState)(!1),p=(0,l.useRouter)(),f=(0,s.useRef)(null),y=(0,s.useRef)(null),v=(0,s.useRef)(null);(0,s.useEffect)(()=>{r&&r!==o&&c(r)},[r]),(0,s.useEffect)(()=>{if(o.length<2){d([]),b(!1);return}return v.current&&clearTimeout(v.current),m(!0),b(!0),v.current=setTimeout(async()=>{try{let e=await fetch("/api/search/autocomplete?q=".concat(encodeURIComponent(o)));if(e.ok){let t=await e.json();d(t.results||[])}}catch(e){d([])}finally{m(!1)}},300),()=>{v.current&&clearTimeout(v.current)}},[o]);let j=e=>{let r=(0,n.z)("".concat(e.brand," ").concat(e.name),e.id);p.push("/products/".concat(r)),c(""),d([]),b(!1),null==t||t()};return(0,s.useEffect)(()=>{if(x>=0&&y.current){let e=y.current.children[x];e&&e.scrollIntoView({block:"nearest",behavior:"smooth"})}},[x]),(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{ref:f,type:"text",value:o,onChange:e=>{c(e.target.value),g(-1)},onKeyDown:e=>{if(h&&0!==i.length)switch(e.key){case"ArrowDown":e.preventDefault(),g(e=>e<i.length-1?e+1:e);break;case"ArrowUp":e.preventDefault(),g(e=>e>0?e-1:-1);break;case"Enter":e.preventDefault(),x>=0&&x<i.length&&j(i[x]);break;case"Escape":b(!1),d([]),null==t||t()}},onFocus:()=>{i.length>0&&b(!0)},placeholder:"Бүтээгдэхүүн хайх...",className:"w-full rounded-full border border-gray-300 px-4 py-2 pl-10 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-gray-300"}),(0,a.jsx)("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),h&&(o.length>=2||i.length>0)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>{b(!1),null==t||t()}}),(0,a.jsx)("div",{ref:y,className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-20 max-h-96 overflow-y-auto",children:u?(0,a.jsx)("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"Хайж байна..."}):i.length>0?i.map((e,t)=>(0,a.jsxs)("button",{onClick:()=>j(e),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors text-left ".concat(t===x?"bg-gray-50":""," ").concat(0===t?"rounded-t-lg":""," ").concat(t===i.length-1?"rounded-b-lg":""),children:[e.image?(0,a.jsx)("img",{src:e.image,alt:e.name,className:"w-12 h-12 object-cover rounded border border-gray-200"}):(0,a.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded border border-gray-200"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),e.nameMn&&(0,a.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.nameMn}),(0,a.jsxs)("p",{className:"text-xs text-gray-600 mt-0.5",children:[e.brand&&"".concat(e.brand," • "),new Intl.NumberFormat("mn-MN").format(e.price)," ₮"]})]})]},e.id)):o.length>=2?(0,a.jsx)("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"Илэрц олдсонгүй"}):null})]})]})}},8018:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var a=r(5155),s=r(63),l=r(2115);function n(e){let{brands:t=[],availableSizes:r=[],minPrice:n=0,maxPrice:o=1e6}=e,c=(0,s.useRouter)(),i=(0,s.useSearchParams)(),[d,u]=(0,l.useState)([]),[m,x]=(0,l.useState)([]),[g,h]=(0,l.useState)([n,o]),[b,p]=(0,l.useState)(!1),[f,y]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=i.get("brands"),t=i.get("sizes"),r=i.get("minPrice"),a=i.get("maxPrice"),s=i.get("inStock");e&&u(e.split(",").filter(Boolean)),t&&x(t.split(",").map(Number).filter(Boolean)),r&&h([Number(r),g[1]]),a&&h([g[0],Number(a)]),"true"===s&&p(!0)},[i]);let v=(0,l.useMemo)(()=>d.length>0||m.length>0||g[0]>n||g[1]<o||b,[d,m,g,n,o,b]);return(0,a.jsxs)("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("button",{onClick:()=>y(!f),className:"flex items-center gap-2 text-sm font-medium text-gray-700 hover:text-gray-900",children:[(0,a.jsx)("svg",{className:"w-5 h-5 transition-transform ".concat(f?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),"Шүүлт",v&&(0,a.jsx)("span",{className:"ml-2 px-2 py-0.5 bg-gray-900 text-white text-xs rounded-full",children:[d.length,m.length,+(g[0]>n||g[1]<o),+!!b].filter(Boolean).reduce((e,t)=>e+t,0)})]}),v&&(0,a.jsx)("button",{onClick:()=>{u([]),x([]),h([n,o]),p(!1);let e=new URLSearchParams;c.push("?".concat(e.toString()))},className:"text-sm text-gray-500 hover:text-gray-900",children:"Цэвэрлэх"})]}),f&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Үнэ: ",g[0].toLocaleString(),"₮ - ",g[1].toLocaleString(),"₮"]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("input",{type:"range",min:n,max:o,value:g[0],onChange:e=>h([Number(e.target.value),g[1]]),className:"flex-1"}),(0,a.jsx)("input",{type:"range",min:n,max:o,value:g[1],onChange:e=>h([g[0],Number(e.target.value)]),className:"flex-1"})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,a.jsx)("input",{type:"number",min:n,max:o,value:g[0],onChange:e=>h([Number(e.target.value),g[1]]),className:"w-24 px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Min"}),(0,a.jsx)("input",{type:"number",min:n,max:o,value:g[1],onChange:e=>h([g[0],Number(e.target.value)]),className:"w-24 px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Max"})]})]}),t.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Брэнд"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:t.map(e=>(0,a.jsx)("button",{onClick:()=>{u(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},className:"px-3 py-1.5 rounded-full text-sm border transition-colors ".concat(d.includes(e)?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-200 hover:border-gray-300"),children:e},e))})]}),r.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Хэмжээ"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:r.sort((e,t)=>e-t).map(e=>(0,a.jsx)("button",{onClick:()=>{x(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},className:"w-12 h-12 rounded border text-sm font-medium transition-colors ".concat(m.includes(e)?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-200 hover:border-gray-300"),children:e},e))})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:b,onChange:e=>p(e.target.checked),className:"w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-900"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Зөвхөн бэлэн бараа"})]})}),(0,a.jsx)("button",{onClick:()=>{let e=new URLSearchParams(i.toString());d.length>0?e.set("brands",d.join(",")):e.delete("brands"),m.length>0?e.set("sizes",m.join(",")):e.delete("sizes"),g[0]>n?e.set("minPrice",g[0].toString()):e.delete("minPrice"),g[1]<o?e.set("maxPrice",g[1].toString()):e.delete("maxPrice"),b?e.set("inStock","true"):e.delete("inStock"),e.delete("page"),c.push("?".concat(e.toString()))},className:"w-full px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors text-sm font-medium",children:"Хэрэглэх"})]})]})}},9770:(e,t,r)=>{Promise.resolve().then(r.bind(r,4001)),Promise.resolve().then(r.bind(r,5464)),Promise.resolve().then(r.bind(r,8018)),Promise.resolve().then(r.bind(r,178)),Promise.resolve().then(r.bind(r,7604))}},e=>{e.O(0,[5417,2619,3528,8441,1255,7358],()=>e(e.s=9770)),_N_E=e.O()}]);