(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{63:(e,t,r)=>{"use strict";var s=r(7260);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},4269:(e,t,r)=>{"use strict";function s(e){return new Intl.NumberFormat("mn-MN").format(e)}r.d(t,{$:()=>s})},4816:(e,t,r)=>{Promise.resolve().then(r.bind(r,9032))},7740:(e,t,r)=>{"use strict";r.d(t,{CartProvider:()=>l,_:()=>c});var s=r(5155),a=r(2115),n=r(5380);let i=(0,a.createContext)(void 0);function l(e){let{children:t}=e,{user:r}=(0,n.A)(),[l,c]=(0,a.useState)([]),d=r?"cart:".concat(r.id):null;(0,a.useEffect)(()=>{if(!d)return void c([]);let e=localStorage.getItem(d);c(e?JSON.parse(e):[])},[d]),(0,a.useEffect)(()=>{d&&localStorage.setItem(d,JSON.stringify(l))},[l,d]);let o=(0,a.useMemo)(()=>l.reduce((e,t)=>e+t.price*t.quantity,0),[l]),u=(0,a.useMemo)(()=>l.reduce((e,t)=>e+t.quantity,0),[l]);return(0,s.jsx)(i.Provider,{value:{items:l,subtotal:o,totalItems:u,addItem:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return r?(c(r=>r.find(t=>t.id===e.id)?r.map(r=>r.id===e.id?{...r,quantity:r.quantity+t}:r):[...r,{...e,quantity:t}]),{ok:!0}):{ok:!1}},updateQuantity:(e,t)=>{c(r=>r.map(r=>r.id===e?{...r,quantity:Math.max(1,t)}:r))},removeItem:e=>{c(t=>t.filter(t=>t.id!==e))},clearCart:()=>{c([])}},children:t})}function c(){let e=(0,a.useContext)(i);if(!e)throw Error("useCart must be used within a CartProvider");return e}},9032:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(5155),a=r(2115),n=r(63),i=r(6424),l=r(5042),c=r(4269);function d(e){let{item:t,onIncrease:r,onDecrease:a,onRemove:n}=e;return(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 border border-gray-200 rounded-lg p-4",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-lg border border-gray-200 bg-gray-50",style:{backgroundColor:t.imageColor||"#FAFAFA"}}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("a",{href:"/products/".concat(t.slug),className:"text-gray-900 font-medium",children:t.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[(0,c.$)(t.price)," ₮"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:a,className:"w-9 h-9 rounded-full border border-gray-300 text-gray-700 hover:border-gray-400",children:"-"}),(0,s.jsx)("span",{className:"w-6 text-center text-sm font-medium",children:t.quantity}),(0,s.jsx)("button",{onClick:r,className:"w-9 h-9 rounded-full border border-gray-300 text-gray-700 hover:border-gray-400",children:"+"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Дүн"}),(0,s.jsxs)("p",{className:"text-base font-semibold text-gray-900",children:[(0,c.$)(t.price*t.quantity)," ₮"]}),(0,s.jsx)("button",{onClick:n,className:"mt-2 text-xs text-gray-500 hover:text-gray-900",children:"Устгах"})]})]})}var o=r(5380),u=r(7740);function m(){let{user:e,loading:t}=(0,o.A)(),{items:r,subtotal:m,updateQuantity:x,removeItem:h,clearCart:f}=(0,u._)(),g=(0,n.useRouter)();return((0,a.useEffect)(()=>{t||e||g.push("/auth/login?redirect=/cart")},[t,e,g]),t)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-white",children:(0,s.jsx)("p",{className:"text-gray-600",children:"Уншиж байна..."})}):(0,s.jsxs)("div",{className:"min-h-screen flex flex-col bg-white",children:[(0,s.jsx)(i.A,{}),(0,s.jsx)("main",{className:"flex-1 py-8 md:py-12",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl md:text-4xl font-semibold text-gray-900",children:"Сагс"}),r.length>0&&(0,s.jsx)("button",{onClick:f,className:"text-sm text-gray-500 hover:text-gray-900",children:"Бүгдийг устгах"})]}),0===r.length?(0,s.jsx)("div",{className:"border border-gray-200 rounded-lg p-8 text-center",children:(0,s.jsx)("p",{className:"text-gray-600",children:"Сагс хоосон байна"})}):(0,s.jsxs)("div",{className:"space-y-4",children:[r.map(e=>(0,s.jsx)(d,{item:e,onIncrease:()=>x(e.id,e.quantity+1),onDecrease:()=>x(e.id,e.quantity-1),onRemove:()=>h(e.id)},e.id)),(0,s.jsxs)("div",{className:"border-t border-gray-200 pt-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Нийт дүн"}),(0,s.jsxs)("p",{className:"text-2xl font-semibold text-gray-900",children:[(0,c.$)(m)," ₮"]})]}),(0,s.jsx)("button",{onClick:()=>g.push("/checkout"),className:"rounded-full bg-gray-900 px-6 py-3 text-white text-base font-medium hover:bg-gray-800",children:"Захиалга хийх"})]})]})]})}),(0,s.jsx)(l.A,{})]})}}},e=>{e.O(0,[417,516,441,493,358],()=>e(e.s=4816)),_N_E=e.O()}]);