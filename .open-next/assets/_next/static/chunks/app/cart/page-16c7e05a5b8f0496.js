(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4005],{1935:(e,s,t)=>{"use strict";t.d(s,{default:()=>n});var a=t(95155),r=t(20063),l=t(18747);function n(e){let{href:s,className:t=""}=e,n=(0,r.useRouter)(),{t:i}=(0,l.o)();return(0,a.jsxs)("button",{onClick:()=>{s?n.push(s):window.history.length>1?n.back():n.push("/")},className:"inline-flex items-center gap-2 text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors ".concat(t),children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),i("common.back")||"Back"]})}},40051:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var a=t(95155);function r(e){let{className:s="",shimmer:t=!0}=e;return(0,a.jsx)("div",{role:"presentation","aria-hidden":!0,className:"rounded bg-gray-200 ".concat(t?"skeleton-shimmer":"animate-pulse"," ").concat(s)})}},52006:(e,s,t)=>{"use strict";t.d(s,{A:()=>o});var a=t(95155),r=t(52619),l=t.n(r),n=t(64269),i=t(12115),c=t(15239);function d(e){let{productId:s,images:t,imageColor:r,alt:l}=e,[n,d]=(0,i.useState)(null),[o,x]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{(async()=>{if(!s)return x(!1);let e=null;if(t&&Array.isArray(t)&&t.length>0){let s=t[0];s&&"string"==typeof s&&s.trim()&&!s.match(/^image\d+$/)&&(e=s.trim())}if(!e)try{let t=await fetch("/api/products/".concat(s));if(t.ok){let s=await t.json();if((null==s?void 0:s.images)&&Array.isArray(s.images)&&s.images.length>0){let t=s.images[0];t&&"string"==typeof t&&t.trim()&&!t.match(/^image\d+$/)&&(e=t.trim())}}}catch(e){}d(e||null),x(!1)})()},[s,t]),o)?(0,a.jsx)("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",style:{backgroundColor:r||"#FAFAFA"},children:(0,a.jsx)("div",{className:"w-6 h-6 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin"})}):n?(0,a.jsx)(c.default,{src:n,alt:l,fill:!0,sizes:"80px",className:"object-cover",loading:"lazy"}):(0,a.jsx)("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",style:{backgroundColor:r||"#FAFAFA"},children:(0,a.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}function o(e){let{item:s,onIncrease:t,onDecrease:r,onRemove:i}=e;return(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 border border-gray-200 rounded-lg p-4",children:[(0,a.jsx)(l(),{href:"/products/".concat(s.slug),className:"relative w-20 h-20 rounded-lg border border-gray-200 bg-gray-50 overflow-hidden",children:(0,a.jsx)(d,{productId:s.id,images:s.images,imageColor:s.imageColor,alt:s.name})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)(l(),{href:"/products/".concat(s.slug),className:"text-base font-semibold text-gray-900 hover:text-gray-700 block",children:s.name}),s.brand&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:s.brand}),s.size&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Хэмжээ: ",(0,a.jsx)("span",{className:"font-medium",children:s.size})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:[(0,n.$)(s.price)," ₮ / ширхэг"]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:"Тоо ширхэг"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:r,className:"w-8 h-8 rounded-full border border-gray-300 text-gray-700 hover:border-gray-900 hover:bg-gray-50 transition-colors flex items-center justify-center text-sm font-medium","aria-label":"Тоо ширхэг багасгах",children:"−"}),(0,a.jsx)("span",{className:"w-10 text-center text-base font-semibold text-gray-900",children:s.quantity}),(0,a.jsx)("button",{onClick:t,className:"w-8 h-8 rounded-full border border-gray-300 text-gray-700 hover:border-gray-900 hover:bg-gray-50 transition-colors flex items-center justify-center text-sm font-medium","aria-label":"Тоо ширхэг нэмэх",children:"+"})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 text-center",children:[s.quantity," \xd7 ",(0,n.$)(s.price)," ₮"]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Нийт дүн"}),(0,a.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:[(0,n.$)(s.price*s.quantity)," ₮"]})]}),(0,a.jsx)("button",{onClick:i,className:"text-xs text-red-600 hover:text-red-800 hover:underline transition-colors",children:"Устгах"})]})]})}},62191:(e,s,t)=>{"use strict";t.d(s,{default:()=>g});var a=t(95155),r=t(12115),l=t(20063),n=t(52006),i=t(88376),c=t(1935),d=t(40051);function o(){return(0,a.jsxs)("div",{className:"flex gap-4 border border-gray-200 rounded-lg p-4",children:[(0,a.jsx)(d.A,{className:"h-24 w-24 rounded-lg shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0 space-y-2",children:[(0,a.jsx)(d.A,{className:"h-4 w-3/4"}),(0,a.jsx)(d.A,{className:"h-3 w-20"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(d.A,{className:"h-8 w-8 rounded"}),(0,a.jsx)(d.A,{className:"h-8 w-8 rounded"})]})]}),(0,a.jsx)(d.A,{className:"h-6 w-16 shrink-0"})]})}function x(){return(0,a.jsx)("div",{className:"min-h-screen flex flex-col bg-white",children:(0,a.jsx)("main",{className:"flex-1 py-8 md:py-12",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsx)(d.A,{className:"h-8 w-24 mb-6"}),(0,a.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,a.jsx)(d.A,{className:"h-9 w-48"})}),(0,a.jsx)(d.A,{className:"h-14 w-full rounded-lg mb-4"}),(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,a.jsx)(o,{},e))}),(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-6 mt-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,a.jsx)(d.A,{className:"h-5 w-24"}),(0,a.jsx)(d.A,{className:"h-8 w-32"})]}),(0,a.jsx)(d.A,{className:"h-12 w-full sm:w-48 rounded-lg"})]})]})})})}var m=t(65380),h=t(52503),u=t(64269);function g(){let{user:e,loading:s}=(0,m.A)(),{items:t,subtotal:d,updateQuantity:o,removeItem:g,clearCart:f}=(0,h._)(),j=(0,l.useRouter)();return((0,r.useEffect)(()=>{},[s,e,j]),s)?(0,a.jsx)(x,{}):(0,a.jsx)("div",{className:"min-h-screen flex flex-col bg-white",children:(0,a.jsx)("main",{className:"flex-1 py-8 md:py-12",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(c.default,{})}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-semibold text-gray-900",children:"Миний сагс"}),t.length>0&&(0,a.jsx)("button",{onClick:f,className:"text-sm text-gray-500 hover:text-gray-900 transition-colors",children:"Бүгдийг устгах"})]}),0===(t||[]).length?(0,a.jsx)(i.default,{icon:(0,a.jsx)("svg",{className:"w-24 h-24 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),title:"Сагс хоосон байна",description:"Сагсанд бүтээгдэхүүн нэмээд захиалга өгөх боломжтой",action:{label:"Дэлгүүр хэсэх",onClick:()=>j.push("/")}}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Сагсанд"," ",(0,a.jsxs)("span",{className:"font-semibold text-gray-900",children:[(t||[]).reduce((e,s)=>e+s.quantity,0)," ","ширхэг"]})," ","бүтээгдэхүүн байна"]})}),(t||[]).map(e=>(0,a.jsx)(n.A,{item:e,onIncrease:()=>o(e.id,e.quantity+1),onDecrease:()=>o(e.id,e.quantity-1),onRemove:()=>g(e.id)},e.id)),(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Бүтээгдэхүүний тоо:"," ",(0,a.jsxs)("span",{className:"font-medium text-gray-900",children:[(t||[]).reduce((e,s)=>e+s.quantity,0)," ","ширхэг"]})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Нэгж бүтээгдэхүүн:"," ",(0,a.jsxs)("span",{className:"font-medium text-gray-900",children:[(t||[]).length," төрөл"]})]})]}),(0,a.jsxs)("div",{className:"text-left sm:text-right",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Нийт дүн:"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:[(0,u.$)(d)," ₮"]})]})]}),(0,a.jsx)("button",{onClick:()=>j.push("/checkout"),className:"w-full sm:w-auto rounded-lg bg-black px-8 py-3 text-white text-base font-medium hover:bg-gray-800 transition-colors",children:"Захиалга өгөх"})]})]})]})})})}},88376:(e,s,t)=>{"use strict";t.d(s,{default:()=>n});var a=t(95155),r=t(52619),l=t.n(r);function n(e){let{icon:s,title:t,description:r,action:n}=e;return(0,a.jsxs)("div",{className:"text-center py-16 px-4",children:[s&&(0,a.jsx)("div",{className:"mb-6 flex justify-center",children:s}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:t}),r&&(0,a.jsx)("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:r}),n&&(n.href?(0,a.jsx)(l(),{href:n.href,className:"inline-flex items-center px-6 py-3 bg-gray-900 text-white rounded-lg font-medium hover:bg-gray-800 transition-colors",children:n.label}):n.onClick?(0,a.jsx)("button",{onClick:n.onClick,className:"inline-flex items-center px-6 py-3 bg-gray-900 text-white rounded-lg font-medium hover:bg-gray-800 transition-colors",children:n.label}):null)]})}},94129:(e,s,t)=>{Promise.resolve().then(t.bind(t,62191)),Promise.resolve().then(t.bind(t,33948))}},e=>{e.O(0,[1500,5417,2619,6394,9971,3948,8747,8441,1255,7358],()=>e(e.s=94129)),_N_E=e.O()}]);