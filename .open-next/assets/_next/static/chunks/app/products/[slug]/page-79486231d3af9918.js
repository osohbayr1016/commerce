(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2221],{1935:(e,r,s)=>{"use strict";s.d(r,{default:()=>i});var t=s(95155),a=s(20063),l=s(18747);function i(e){let{href:r,className:s=""}=e,i=(0,a.useRouter)(),{t:n}=(0,l.o)();return(0,t.jsxs)("button",{onClick:()=>{r?i.push(r):i.back()},className:"inline-flex items-center gap-2 text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors ".concat(s),children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),n("common.back")||"Back"]})}},2442:(e,r,s)=>{"use strict";s.d(r,{default:()=>i});var t=s(95155),a=s(12115),l=s(15239);function i(e){let{images:r,imageColor:s,productName:i}=e,[n,o]=(0,a.useState)(0),d=r.length||1;return(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,t.jsx)("div",{className:"flex flex-row md:flex-col gap-2 order-2 md:order-1",children:r.map((e,r)=>(0,t.jsx)("button",{onClick:()=>o(r),className:"w-16 h-16 md:w-20 md:h-20 rounded border-2 transition-all overflow-hidden relative ".concat(n===r?"border-gray-900":"border-gray-200 hover:border-gray-400"),style:{backgroundColor:s},"aria-label":"View image ".concat(r+1),children:e?(0,t.jsx)(l.default,{src:e,alt:"".concat(i," ").concat(r+1),fill:!0,sizes:"80px",className:"object-cover",loading:"lazy"}):null},r))}),(0,t.jsx)("div",{className:"flex-1 order-1 md:order-2",children:(0,t.jsx)("div",{className:"w-full aspect-square rounded-lg border border-gray-200 bg-gray-50 flex items-center justify-center relative overflow-hidden",style:{backgroundColor:s},children:r[n]?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.default,{src:r[n],alt:i||"Product Image",fill:!0,sizes:"(max-width: 768px) 100vw, 50vw",className:"object-cover",priority:!0}),(0,t.jsxs)("span",{className:"absolute top-3 right-3 text-xs text-white bg-black bg-opacity-50 px-2 py-1 rounded z-10",children:[n+1," of ",d]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{className:"absolute top-3 right-3 text-xs text-gray-500",children:[n+1," of ",d]}),(0,t.jsx)("span",{className:"text-gray-400 text-sm",children:i||"Product Image"})]})})})]})}},10289:(e,r,s)=>{"use strict";s.d(r,{default:()=>o});var t=s(95155),a=s(20063),l=s(64269),i=s(65380),n=s(52503);function o(e){let{product:r}=e,{user:s}=(0,i.A)(),{addItem:o}=(0,n._)(),d=(0,a.useRouter)(),c=(0,a.usePathname)(),m=r.description||"Манай дэлгүүр АНУ-аас бараагаа илгээдэг тул захиалга баталгаажсаны дараа 10–14 хоногийн дотор Монголд очих бөгөөд каргоны төлбөрийг тусад нь төлөхийг анхаарна уу.",x=e=>{if(!s)return void d.push("/auth/login?redirect=".concat(encodeURIComponent(c)));o({id:String(r.id),name:r.nameEn,price:r.price,originalPrice:r.originalPrice,quantity:1,slug:r.slug,brand:r.brand,imageColor:r.imageColor,brandColor:r.brandColor}),e&&d.push("/checkout")};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[r.brand&&(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["brand ",r.brand]}),(0,t.jsx)("h1",{className:"text-3xl md:text-4xl font-semibold text-gray-900 mt-2",children:r.nameEn})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("span",{className:"text-3xl md:text-4xl font-semibold text-gray-900",children:[(0,l.$)(r.price)," ₮"]}),r.discount>0&&(0,t.jsxs)("span",{className:"text-sm text-gray-500 line-through",children:[(0,l.$)(r.originalPrice)," ₮"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[r.discount>0&&(0,t.jsxs)("span",{className:"rounded-full bg-gray-100 px-2 py-1 text-gray-700",children:["-",r.discount,"%"]}),r.savings>0&&(0,t.jsxs)("span",{className:"text-gray-500",children:["Хэмнэлт: ",(0,l.$)(r.savings)," ₮"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Богино тайлбар"}),(0,t.jsx)("p",{className:"text-sm md:text-base text-gray-600 leading-relaxed",children:m})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,t.jsx)("button",{onClick:()=>x(!1),className:"flex-1 rounded-lg bg-gray-900 px-6 py-3 text-white text-base font-medium hover:bg-gray-800",children:"Сагслах"}),(0,t.jsx)("button",{onClick:()=>x(!0),className:"flex-1 rounded-lg border border-gray-900 px-6 py-3 text-gray-900 text-base font-medium hover:bg-gray-50",children:"Захиалах"})]})]})}},17861:(e,r,s)=>{"use strict";s.d(r,{default:()=>i});var t=s(95155),a=s(20063),l=s(82435);function i(e){let{product:r}=e,s=(0,a.useRouter)(),{addToComparison:i,isInComparison:n,comparisonProducts:o}=(0,l.l)(),d=n(r.id);return(0,t.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,t.jsxs)("button",{onClick:()=>{let e={id:r.id,name_en:r.nameEn,name_mn:r.nameMn,brand:r.brand,price:r.price,original_price:r.originalPrice,discount:r.discount,images:r.images,description:r.description,brand_color:r.brandColor,image_color:r.imageColor};n(r.id)||i(e),s.push("/compare")},className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-white border-2 border-gray-300 rounded-lg text-gray-900 font-medium hover:border-gray-900 hover:bg-gray-50 transition",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),d?"View Comparison":"Compare with Other Products"]}),o.length>0&&(0,t.jsxs)("p",{className:"text-xs text-center text-gray-500 mt-2",children:[o.length," product",o.length>1?"s":""," in comparison"]})]})}},45670:(e,r,s)=>{"use strict";s.d(r,{default:()=>o});var t=s(95155),a=s(12115),l=s(25464);function i(){return(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 bg-white animate-pulse",children:[(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsx)("div",{className:"w-16 h-8 bg-gray-200 rounded"})}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("div",{className:"w-full aspect-square bg-gray-200 rounded border border-gray-200"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-3"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-3"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"h-5 bg-gray-200 rounded w-20"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-16"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-12"})]})]}),(0,t.jsx)("div",{className:"pt-3 mt-auto",children:(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded-full"})})]})}function n(e){let{products:r,loading:s=!1,skeletonCount:a=10}=e;return s?(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 md:gap-5 lg:gap-6",children:Array.from({length:a}).map((e,r)=>(0,t.jsx)(i,{},r))}):(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 md:gap-5 lg:gap-6",children:r.map(e=>(0,t.jsx)(l.default,{product:e},e.id))})}function o(e){let{productId:r}=e,[s,l]=(0,a.useState)([]),[i,o]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/products/".concat(r,"/recommendations?limit=6"));if(e.ok){let r=await e.json();l(r.products||[])}}catch(e){}finally{o(!1)}};r&&e()},[r]),i)?(0,t.jsxs)("div",{className:"py-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Танд зөвлөж байна"}),(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Уншиж байна..."})]}):0===s.length?null:(0,t.jsxs)("div",{className:"py-8 border-t border-gray-200",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Танд зөвлөж байна"}),(0,t.jsx)(n,{products:s})]})}},57535:(e,r,s)=>{"use strict";s.d(r,{default:()=>o});var t=s(95155),a=s(12115),l=s(65380);function i(e){let{rating:r,onRatingChange:s,readonly:l=!1,size:i="md"}=e,[n,o]=(0,a.useState)(0),d={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},c=()=>{l||o(0)},m=n||r;return(0,t.jsx)("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{!l&&s&&s(e)},onMouseEnter:()=>{!l&&o(e)},onMouseLeave:c,disabled:l,className:"".concat(d[i]," ").concat(l?"cursor-default":"cursor-pointer"," transition-colors"),children:(0,t.jsx)("svg",{className:"".concat(d[i]," ").concat(e<=m?"text-yellow-400 fill-yellow-400":"text-gray-300 fill-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},e))})}function n(e){let{productId:r,existingReview:s,onSuccess:n,onCancel:o}=e,{user:d}=(0,l.A)(),[c,m]=(0,a.useState)((null==s?void 0:s.rating)||0),[x,u]=(0,a.useState)((null==s?void 0:s.review_text)||""),[g,h]=(0,a.useState)(!1),[p,b]=(0,a.useState)(null);if(!d)return(0,t.jsx)("div",{className:"p-4 border border-gray-200 rounded-lg text-center text-gray-600",children:"Нэвтэрч орж бүтээгдэхүүнийг худалдаж авсны дараа үнэлгээ өгөх боломжтой"});let f=async e=>{if(e.preventDefault(),0===c)return void b("Үнэлгээ сонгоно уу");h(!0),b(null);try{let e=s?"PUT":"POST",t=s?{review_id:s.id,rating:c,review_text:x.trim()||null}:{rating:c,review_text:x.trim()||null},a=await fetch("/api/products/".concat(r,"/reviews"),{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){let e=await a.json();throw Error(e.error||"Алдаа гарлаа")}n(),s||(m(0),u(""))}catch(e){b(e instanceof Error?e.message:"Үнэлгээ нэмэхэд алдаа гарлаа")}finally{h(!1)}};return(0,t.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Үнэлгээ"}),(0,t.jsx)(i,{rating:c,onRatingChange:m,readonly:!1})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"review-text",className:"block text-sm font-medium text-gray-700 mb-2",children:"Сэтгэгдэл (сонголттой)"}),(0,t.jsx)("textarea",{id:"review-text",value:x,onChange:e=>u(e.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-300 text-sm",placeholder:"Бүтээгдэхүүний талаарх санал бодлоо бичнэ үү..."})]}),p&&(0,t.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-600",children:p}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{type:"submit",disabled:g||0===c,className:"px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed text-sm font-medium",children:g?"Хадгалж байна...":s?"Шинэчлэх":"Илгээх"}),o&&(0,t.jsx)("button",{type:"button",onClick:o,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm font-medium",children:"Цуцлах"})]})]})}function o(e){let{productId:r,averageRating:s,totalReviews:o}=e,{user:d}=(0,l.A)(),[c,m]=(0,a.useState)([]),[x,u]=(0,a.useState)(!0),[g,h]=(0,a.useState)(1),[p,b]=(0,a.useState)(1),[f,v]=(0,a.useState)(null),[y,j]=(0,a.useState)(!1),N=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;u(!0);try{let t=await fetch("/api/products/".concat(r,"/reviews?page=").concat(e,"&limit=10"));if(t.ok){var s;let e=await t.json();m(e.reviews||[]),b((null==(s=e.pagination)?void 0:s.totalPages)||1)}}catch(e){}finally{u(!1)}};(0,a.useEffect)(()=>{N(g)},[r,g]);let w=async e=>{if(confirm("Энэ үнэлгээг устгахдаа итгэлтэй байна уу?"))try{(await fetch("/api/products/".concat(r,"/reviews?review_id=").concat(e),{method:"DELETE"})).ok&&N(g)}catch(e){}},C=d?c.find(e=>e.profiles.id===d.id):void 0;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Үнэлгээ ба сэтгэгдэл"}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i,{rating:Math.round(s),readonly:!0,size:"lg"}),(0,t.jsx)("span",{className:"text-lg font-medium text-gray-900",children:s.toFixed(1)})]}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:["(",o," үнэлгээ)"]})]})]}),d&&!C&&(0,t.jsx)("button",{onClick:()=>j(!y),className:"px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 text-sm font-medium",children:y?"Цуцлах":"Үнэлгээ нэмэх"})]}),y&&d&&!C&&(0,t.jsx)("div",{className:"p-4 border border-gray-200 rounded-lg",children:(0,t.jsx)(n,{productId:r,onSuccess:()=>{j(!1),N(g)},onCancel:()=>j(!1)})}),f&&C&&(0,t.jsx)("div",{className:"p-4 border border-gray-200 rounded-lg",children:(0,t.jsx)(n,{productId:r,existingReview:C,onSuccess:()=>{v(null),N(g)},onCancel:()=>v(null)})}),x?(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Уншиж байна..."}):0===c.length?(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Хараахан үнэлгээ байхгүй байна"}):(0,t.jsx)("div",{className:"space-y-4",children:c.map(e=>(0,t.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:e.profiles.avatar_url?(0,t.jsx)("img",{src:e.profiles.avatar_url,alt:e.profiles.full_name||"User",className:"w-10 h-10 rounded-full"}):(0,t.jsx)("span",{className:"text-gray-600 text-sm font-medium",children:(e.profiles.full_name||"U")[0].toUpperCase()})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.profiles.full_name||"Хэрэглэгч"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:(e=>{let r=new Date(e);return new Intl.DateTimeFormat("mn-MN",{year:"numeric",month:"long",day:"numeric"}).format(r)})(e.created_at)})]})]}),(null==d?void 0:d.id)===e.profiles.id&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>v(f===e.id?null:e.id),className:"text-sm text-gray-600 hover:text-gray-900",children:"Засах"}),(0,t.jsx)("button",{onClick:()=>w(e.id),className:"text-sm text-red-600 hover:text-red-900",children:"Устгах"})]})]}),(0,t.jsx)(i,{rating:e.rating,readonly:!0,size:"sm"}),e.review_text&&(0,t.jsx)("p",{className:"mt-3 text-sm text-gray-700",children:e.review_text})]},e.id))}),p>1&&(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>h(e=>Math.max(1,e-1)),disabled:1===g,className:"px-3 py-1 border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Өмнөх"}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:[g," / ",p]}),(0,t.jsx)("button",{onClick:()=>h(e=>Math.min(p,e+1)),disabled:g===p,className:"px-3 py-1 border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Дараах"})]})]})}},74963:(e,r,s)=>{Promise.resolve().then(s.bind(s,32025)),Promise.resolve().then(s.bind(s,44001)),Promise.resolve().then(s.bind(s,17861)),Promise.resolve().then(s.bind(s,2442)),Promise.resolve().then(s.bind(s,10289)),Promise.resolve().then(s.bind(s,25464)),Promise.resolve().then(s.bind(s,45670)),Promise.resolve().then(s.bind(s,57535)),Promise.resolve().then(s.bind(s,1935))},82435:(e,r,s)=>{"use strict";s.d(r,{ComparisonProvider:()=>n,l:()=>o});var t=s(95155),a=s(12115),l=s(66905);let i=(0,a.createContext)(void 0);function n(e){let{children:r}=e,[s,n]=(0,a.useState)([]),{showToast:o}=(0,l.d)();return(0,a.useEffect)(()=>{let e=localStorage.getItem("comparison");if(e)try{n(JSON.parse(e))}catch(e){localStorage.removeItem("comparison")}},[]),(0,a.useEffect)(()=>{s.length>0?localStorage.setItem("comparison",JSON.stringify(s)):localStorage.removeItem("comparison")},[s]),(0,t.jsx)(i.Provider,{value:{comparisonProducts:s,addToComparison:e=>s.length>=4?void o("Maximum ".concat(4," products can be compared"),"error"):s.find(r=>r.id===e.id)?void o("Product already in comparison","info"):void(n(r=>[...r,e]),o("Added to comparison","success")),removeFromComparison:e=>{n(r=>r.filter(r=>r.id!==e)),o("Removed from comparison","info")},clearComparison:()=>{n([]),localStorage.removeItem("comparison"),o("Comparison cleared","info")},isInComparison:e=>s.some(r=>r.id===e)},children:r})}function o(){let e=(0,a.useContext)(i);if(!e)throw Error("useComparison must be used within ComparisonProvider");return e}}},e=>{e.O(0,[1500,5417,2619,6394,3241,5464,8747,8441,1255,7358],()=>e(e.s=74963)),_N_E=e.O()}]);