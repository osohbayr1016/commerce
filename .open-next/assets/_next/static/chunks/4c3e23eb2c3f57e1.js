(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,89271,e=>{"use strict";function r(e){if(e instanceof Error)return e.message;if("string"==typeof e)return e;if(e&&"object"==typeof e){if("message"in e)return String(e.message);if("msg"in e)return String(e.msg)}return"Тодорхойгүй алдаа гарлаа"}e.s(["getErrorMessage",()=>r])},69888,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(11795),s=e.i(89271);function n({editing:e,formData:t,onFormChange:a,onSubmit:s,onCancel:n,loading:i}){let l=async e=>{e.preventDefault(),await s()};return(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e?"Ангилал засах":"Шинэ ангилал нэмэх"}),(0,r.jsxs)("form",{onSubmit:l,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Нэр"}),(0,r.jsx)("input",{type:"text",value:t.name,onChange:e=>a("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"English Name"}),(0,r.jsx)("input",{type:"text",value:t.name_en,onChange:e=>a("name_en",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Монгол нэр"}),(0,r.jsx)("input",{type:"text",value:t.name_mn,onChange:e=>a("name_mn",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug"}),(0,r.jsx)("input",{type:"text",value:t.slug,onChange:e=>a("slug",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Order"}),(0,r.jsx)("input",{type:"number",value:t.display_order,onChange:e=>a("display_order",Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:t.is_active,onChange:e=>a("is_active",e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:"Active"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:t.show_in_header,onChange:e=>a("show_in_header",e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:"Show in Header Navigation"})]})]}),(0,r.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,r.jsx)("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Saving...":e?"Update":"Create"}),e&&(0,r.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]})}var i=e.i(43066);function l({categories:e,loading:t,onEdit:a,onDelete:s,onToggleActive:n}){let l=(0,i.useModal)();return t?(0,r.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:(0,r.jsx)("p",{className:"text-gray-600",children:"Loading categories..."})}):0===e.length?(0,r.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:(0,r.jsx)("p",{className:"text-gray-600",children:"No categories found"})}):(0,r.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Slug"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Header"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.name_en&&(0,r.jsx)("div",{className:"text-xs text-gray-500",children:e.name_en})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.slug}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.display_order}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("button",{onClick:()=>n(e.id,!e.is_active),className:`px-2 py-1 text-xs font-medium rounded-full ${e.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.is_active?"Active":"Inactive"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.show_in_header?"Yes":"No"}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,r.jsx)("button",{onClick:()=>a(e),className:"text-blue-600 hover:text-blue-900 mr-4",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>{l.showConfirm("Ангилал устгах","Та энэ ангилалыг устгахдаа итгэлтэй байна уу?",()=>s(e.id),"Устгах","Болих")},className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e.id))})]})})}function d(){let[e,i]=(0,t.useState)([]),[d,c]=(0,t.useState)(!0),[o,m]=(0,t.useState)(null),[u,x]=(0,t.useState)({name:"",name_en:"",name_mn:"",slug:"",is_active:!0,display_order:0,show_in_header:!1}),[g,h]=(0,t.useState)(""),p=(0,a.createClient)(),y=(0,t.useCallback)(async()=>{try{let{data:e,error:r}=await p.from("categories").select("*").order("display_order",{ascending:!0});if(r)throw r;i(e||[])}catch(e){}finally{c(!1)}},[p]);function b(){x({name:"",name_en:"",name_mn:"",slug:"",is_active:!0,display_order:0,show_in_header:!1}),m(null),h("")}async function f(){c(!0);try{let e=e=>{let r=function(e){let{name:r,name_en:t,name_mn:a,slug:s,is_active:n,display_order:i,show_in_header:l}=u,d={name:r,name_en:t||null,name_mn:a||null,slug:s,is_active:n,display_order:i};return e&&(d.show_in_header=l),d}(e);return o?p.from("categories").update(r).eq("id",o):p.from("categories").insert([r])},r=await e(!0);if(r.error?.message?.includes("show_in_header")&&r.error?.message?.includes("schema cache")&&(r=await e(!1)),r.error)throw r.error;h(o?"Category updated successfully":"Category created successfully"),b(),await y()}catch(e){h(`Error: ${(0,s.getErrorMessage)(e)}`)}finally{c(!1)}}async function j(e){try{let{error:r}=await p.from("categories").delete().eq("id",e);if(r)throw r;h("Category deleted successfully"),await y()}catch(e){h(`Error: ${(0,s.getErrorMessage)(e)}`)}}async function N(e,r){try{let{error:t}=await p.from("categories").update({is_active:r}).eq("id",e);if(t)throw t;await y()}catch(e){h(`Error: ${(0,s.getErrorMessage)(e)}`)}}return(0,t.useEffect)(()=>{y()},[y]),(0,r.jsxs)("div",{className:"p-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-semibold text-gray-900 mb-2",children:"Ангилал удирдах"}),(0,r.jsx)("p",{className:"text-base text-gray-600",children:"Бүтээгдэхүүний ангилал нэмэх, засах"})]}),g&&(0,r.jsx)("div",{className:`mb-6 p-4 rounded-lg ${g.includes("Error")?"bg-red-50 text-red-800":"bg-green-50 text-green-800"}`,children:g}),(0,r.jsx)(n,{editing:o,formData:u,onFormChange:function(e,r){x(t=>({...t,[e]:r}))},onSubmit:f,onCancel:b,loading:d}),(0,r.jsx)(l,{categories:e,loading:d,onEdit:function(e){x({name:e.name,name_en:e.name_en||"",name_mn:e.name_mn||"",slug:e.slug,is_active:e.is_active??!0,display_order:e.display_order||0,show_in_header:e.show_in_header||!1}),m(e.id),h("")},onDelete:j,onToggleActive:N})]})}e.s(["default",()=>d],69888)}]);